"use strict";(self.webpackChunkdendrogram=self.webpackChunkdendrogram||[]).push([[673],{955(e,t,n){n.d(t,{A:()=>a});var s=n(332),i=n.n(s),r=n(444),o=n.n(r)()(i());o.push([e.id,".src-components-Viewer-Viewer-module_viewer_2yNZtW {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    --size: 300px;\n\n    > aside {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: var(--size);\n        height: 100%;\n        border-right: 1px solid #fff;\n        background-color: #111;\n        color: #eee;\n        padding: 1em;\n        z-index: 2;\n\n        .src-components-Viewer-Viewer-module_grid_H24ete {\n            display: grid;\n            grid-template-columns: auto 1fr;\n            gap: 0.5em 1em;\n\n            > div {\n                opacity: 0.5;\n            }\n\n            > b {\n                opacity: 1;\n            }\n        }\n    }\n\n    > canvas {\n        position: absolute;\n        left: var(--size);\n        top: 0;\n        width: calc(100% - var(--size));\n        height: 100%;\n    }\n}\n","",{version:3,sources:["webpack://./src/components/Viewer/Viewer.module.css"],names:[],mappings:"AAAA;IACI,kBAAkB;IAClB,OAAO;IACP,MAAM;IACN,WAAW;IACX,YAAY;IACZ,aAAa;;IAEb;QACI,kBAAkB;QAClB,OAAO;QACP,MAAM;QACN,kBAAkB;QAClB,YAAY;QACZ,4BAA4B;QAC5B,sBAAsB;QACtB,WAAW;QACX,YAAY;QACZ,UAAU;;QAEV;YACI,aAAa;YACb,+BAA+B;YAC/B,cAAc;;YAEd;gBACI,YAAY;YAChB;;YAEA;gBACI,UAAU;YACd;QACJ;IACJ;;IAEA;QACI,kBAAkB;QAClB,iBAAiB;QACjB,MAAM;QACN,+BAA+B;QAC/B,YAAY;IAChB;AACJ",sourcesContent:[".viewer {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    --size: 300px;\n\n    > aside {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: var(--size);\n        height: 100%;\n        border-right: 1px solid #fff;\n        background-color: #111;\n        color: #eee;\n        padding: 1em;\n        z-index: 2;\n\n        .grid {\n            display: grid;\n            grid-template-columns: auto 1fr;\n            gap: 0.5em 1em;\n\n            > div {\n                opacity: 0.5;\n            }\n\n            > b {\n                opacity: 1;\n            }\n        }\n    }\n\n    > canvas {\n        position: absolute;\n        left: var(--size);\n        top: 0;\n        width: calc(100% - var(--size));\n        height: 100%;\n    }\n}\n"],sourceRoot:""}]),o.locals={viewer:"src-components-Viewer-Viewer-module_viewer_2yNZtW",grid:"src-components-Viewer-Viewer-module_grid_H24ete"};const a=o},673(e,t,n){n.r(t),n.d(t,{default:()=>fe});var s=n(656),i=n(140),r=n(31),o=n(175);function a(e,t,n){const s=2*n*Math.max(1,Math.abs(t.center[0]-t.min[0]),Math.abs(t.center[0]-t.max[0])),i=2*n*Math.max(1,Math.abs(t.center[1]-t.min[1]),Math.abs(t.center[1]-t.max[1]));return e.fitSpaceAtTarget(s,i),e.transfo.distance}function c(e,t,n,s,i){const r=function(e,t,n,s){const i=new o.oao(...e.start,1),r=new o.oao(...e.end,1),a=new o.MC5(t.matrixProjection).multiply(t.matrixModelView);i.applyMatrix(a),i.scale(1/i.w),r.applyMatrix(a),r.scale(1/r.w);const c=new o.opw(r.x-i.x,r.y-i.y),l=c.size;c.normalize();const h=new o.opw(n-i.x,s-i.y),d=c.dot(h);return(0,o.O6b)(l>0?d/l:0,0,1)}(t,n,s,i),a=e.getSegmentsOfSection(t.sectionName);let c=0,l=0;for(const e of a)l+=e.length,e.segmentIndex===t.segmentIndex?c+=e.length*r:e.segmentIndex<t.segmentIndex&&(c+=e.length);return l>0?c/l:0}var l=Object.defineProperty,h=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&u(e,n,t[n]);if(h)for(var n of h(t))m.call(t,n)&&u(e,n,t[n]);return e};class g extends o.rBx{constructor(){super({varyings:{varColor:"vec3"},extraVertexShaderFunctions:p({},(0,o.tAc)()),vertexShaderCode:["varColor = float01ToVec3(mix(attUV1_A.y, attUV1_B.y, uniMix));"],fragmentShaderCode:["return vec4(varColor, 1);"]})}}class f{constructor(e){this.onscreenContext=e,this.offscreenCanvas=new OffscreenCanvas(1,1),this._data=void 0,this.group=new o.EWU,this.paint=()=>{const{onscreenContext:e,offscreenContext:t,offscreenCanvas:n}=this;t.camera=e.camera;const{canvas:s}=e,i=Math.ceil(s.width/2),r=Math.ceil(s.height/2);n.width=i,n.height=r,t.paint()},e.eventPaint.addListener(this.paint);const t=new o.tfp(this.offscreenCanvas,{preserveDrawingBuffer:!0,antialias:!1,alpha:!1});t.camera=e.camera,this.offscreenContext=t,t.add(this.group),this.paint()}get data(){return this._data}set data(e){if(e===this._data)return;if(this._data=e,this.group.delete(),!e)return;const t=this.offscreenContext,n=[[e.dataset3D,e.datasetDendrogram]],s=new o.Z5j(t,{roundness:3,minRadius:3,datasetsPairs:n,material:new g});this.group.add(new o.o57(t,{color:[0,0,0,1],depth:1}),new o.Ipk(t,{depth:o.Eg5.lessOrEqual,children:[s]}))}getItemAt(e,t){const{data:n,offscreenContext:s}=this;if(!n)return null;const i=new Uint8Array(s.width*s.height*4);s.gl.readPixels(0,0,s.width,s.height,s.gl.RGBA,s.gl.UNSIGNED_BYTE,i);const{structure:r}=n,[o,a,c]=s.readPixel(e,t),l=(o+(a<<8)+(c<<16))/16777215,h=Math.floor((r.length+2)*l)-1;return h<0||h>r.length-1?null:r.get(h)}delete(){this.onscreenContext.eventPaint.removeListener(this.paint),this.offscreenContext.delete()}}var x=Object.defineProperty,v=Object.defineProperties,w=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&y(e,n,t[n]);if(A)for(var n of A(t))C.call(t,n)&&y(e,n,t[n]);return e},S=(e,t)=>v(e,w(t));function _(e){const t=new Map;for(const n of e)t.set(P(n.end),n);for(const n of e){if(n.parent)continue;const e=t.get(P(n.start));e&&(e.children.push(n),n.parent=e)}const[n,...s]=e.filter(e=>!e.parent);for(const e of s)n.children.push(e),e.parent=n;return M(n),N(n),E(n,e),n}function P([e,t,n]){return`${e.toFixed(3)}/${t.toFixed(3)}/${n.toFixed(3)}`}function M(e,t=0){if(!e)return;e.distanceFromSoma=t;const n=t+e.length;e.leavesCount=e.children.length>0?0:1,e.maxLength=0;for(const t of e.children)M(t,n),e.leavesCount+=t.leavesCount,e.maxLength=Math.max(e.maxLength,t.maxLength);e.maxLength+=e.length}function N(e,t=-1,n=1){if(!e)return;e.rank=(t+n)/2;const s=Math.abs(n-t);let i=t;for(const t of e.children){const n=s*t.leavesCount/e.leavesCount;N(t,i,i+n),i+=n}}function E(e,t){if(e)if(e.children.length>1)for(let n=0;n<e.children.length;n++){const s=e.children[n],i=S(I({},s),{name:`${e.name} > ${s.name}`,type:k.Liaison,index:e.index,start:[...e.end],end:[...s.start],radius:.001,children:[s]});t.push(i),e.children[n]=i,E(s,t)}else for(const n of e.children)E(n,t)}var k=(e=>(e[e.Soma=0]="Soma",e[e.Dendrite=1]="Dendrite",e[e.BasalDendrite=2]="BasalDendrite",e[e.ApicalDendrite=3]="ApicalDendrite",e[e.Myelin=4]="Myelin",e[e.Axon=5]="Axon",e[e.Selected=6]="Selected",e[e.Liaison=7]="Liaison",e[e.Unknown=8]="Unknown",e))(k||{});class B{constructor(e){this.items=[],this.segments=new Map,this.segmentsPerSection=new Map;const t=D(),n=D(),s=D();this.bbox=t,this.bboxSoma=n,this.bboxDendrites=s;let i=!0,r=!0,a=0;const c=new o.hNi,l=Object.keys(e);let h=!1;for(const o of l){const l=o.toLowerCase().startsWith("soma"),d=e[o];for(let e=0;e<d.nseg;e++){const m=[d.xstart[e],d.ystart[e],d.zstart[e]],u=[d.xend[e],d.yend[e],d.zend[e]],p=O(o);3===p&&(h=!0);const g={children:[],start:m,end:u,radius:d.diam[e]/2,index:this.items.length,name:`${o}[${e}]`,sectionName:o,sectionIndex:T(o),segmentIndex:e,segmentsCount:d.nseg,length:d.length[e],type:p,distanceFromSoma:0,leavesCount:0,maxLength:0,rank:0};this.segments.set(g.name,g),this.addToSection(g),this.items.push(g),t.min=z(t.min,m,g.radius),t.max=j(t.max,m,g.radius),t.min=z(t.min,u,g.radius),t.max=j(t.max,u,g.radius),l?(a++,c.add(m),a++,c.add(u),n.min=z(n.min,m,g.radius),n.max=j(n.max,m,g.radius),n.min=z(n.min,u,g.radius),n.max=j(n.max,u,g.radius),i=!1):[1,2,3,0].includes(p)&&(s.min=z(s.min,m,g.radius),s.max=j(s.max,m,g.radius),s.min=z(s.min,u,g.radius),s.max=j(s.max,u,g.radius),r=!1)}}if(!h)for(const e of this.items)2===e.type&&(e.type=1);a>0&&c.scale(1/a),t.center=[...c],this.hasApicalDendrites=h,i&&Q(t,n),r&&Q(t,s),this.root=_(this.items)}getSegmentsOfSection(e){var t;return null!=(t=this.segmentsPerSection.get(e))?t:[]}get length(){return this.items.length}get(e){const t=this.items[e];if(!t)throw Error(`Index (${e}) out of bounds! Items available: ${this.length}.`);return t}forEach(e){this.items.forEach(e)}addToSection(e){const t=this.segmentsPerSection.get(e.sectionName);t?(t.push(e),t.sort(({segmentIndex:e},{segmentIndex:t})=>e-t)):this.segmentsPerSection.set(e.sectionName,[e])}}function z(e,t,n=0){return[Math.min(e[0],t[0]-n),Math.min(e[1],t[1]-n),Math.min(e[2],t[2]-n)]}function j(e,t,n=0){return[Math.max(e[0],t[0]+n),Math.max(e[1],t[1]+n),Math.max(e[2],t[2]+n)]}function O(e){switch(e.slice(0,4).toLowerCase()){case"soma":return 0;case"axon":return 5;case"dend":return 2;case"apic":return 3;case"myel":return 4;default:return 8}}function T(e){const t=e.indexOf("["),n=e.slice(t+1);return parseInt(n.slice(0,n.length-1),10)}function D(){return{min:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],max:[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],center:[0,0,0]}}function Q(e,t){t.center=[...e.center],t.max=[...e.max],t.min=[...e.min]}const L=[];L[k.Axon]="#07f",L[k.Dendrite]="#F55",L[k.BasalDendrite]="#F33",L[k.ApicalDendrite]="#F8f",L[k.Myelin]="#778",L[k.Soma]="#dde",L[k.Liaison]="#555",L[k.Selected]="#fc0",L[k.Unknown]="#a6f";class V extends o.EWU{constructor(e,t){super(),this.context=e,this.add(new o.Ipk(e,{blend:o.aMr.add,cull:o.TfJ.back,depth:o.Eg5.always,children:[new o.b5H(e,{roundness:32,minRadius:2,dataset:t.makeDataset,material:new o.$Hl({color:[.8,.6,.3,1],specularExponent:1,specularIntensity:.5,lockLightsToCamera:!0,light:new o.U5Z({direction:new o.hNi(0,0,-1)})})})]}))}}class Z extends o.EWU{constructor(e,t){super();for(const{color:n,data:s}of t){const t=new o.h_q(e,{name:`TgdPainterPointsCloud[${n}]`,dataPoint:s,minSizeInPixels:4,radiusMultiplier:5,texture:new o.HTX(e).loadBitmap((0,o.lu8)(1,1,n)),mustDeleteTexture:!0});this.add(t)}}delete(){super.delete()}}class Y extends o.EWU{constructor(e,t){super(),this.context=e,this.data=t,this.groupSegments=new o.EWU,this.groupSynapses=new o.EWU,this.groupHover=new o.EWU,this._painterSegments=null,this._mix=0,this._synapses=null,this.palette=new o.HTX(e).loadBitmap((0,o.rY8)(L)).setParams({magFilter:"NEAREST",minFilter:"NEAREST"}),this.add(new o.o57(e,{color:[0,0,0,1],depth:1}),new o.Ipk(e,{depth:o.Eg5.less,children:[this.groupSegments,this.groupSynapses,this.groupHover]}));const{dataset3D:n,datasetDendrogram:s}=t,i=new o.Z5j(e,{roundness:6,minRadius:.5,datasetsPairs:[[n,s]],material:new o.$Hl({color:this.palette,specularExponent:1,specularIntensity:.25,lockLightsToCamera:!0,light:new o.U5Z({direction:new o.hNi(0,0,-1)})})});i.mix=this.mix,this._painterSegments=i,this.groupSegments.add(i),e.paint()}get mix(){return this._mix}set mix(e){this._mix=e,this._painterSegments&&(this._painterSegments.mix=e)}get synapsesEnabled(){return this.groupSynapses.active}set synapsesEnabled(e){this.groupSynapses.active=e,this.context.paint()}get synapses(){return this._synapses}set synapses(e){this._synapses=e;const{context:t,groupSynapses:n}=this;n.delete(),e&&e.length>0&&n.add(new Z(t,e)),this.context.paint()}highlight(e){const{groupHover:t,context:n}=this;t.delete(),e&&t.add(new V(n,e)),n.paint()}delete(){this.palette.delete(),this.groupHover.delete(),this.groupSegments.delete(),this.groupSynapses.delete()}}class F{constructor(){this.painter=null,this.offscreen=null,this._context=null,this._mode="3d",this.actualPaint=(e,t)=>{const{painter:n}=this;if(n){const s=8,i=1,r=(0,o.P_T)(e,0,s+i),a=(0,o.qx1)(r,0,s,0,2*Math.PI,!0),c=(0,o.qx1)(Math.cos(a),-1,1,0,1);n.mix=c,n.paint(e,t)}},this.logic=new o.ZJl(this.actualPaint)}get context(){return this._context}set context(e){this._context!==e&&(this._context=e,e&&(e.removeAll(),e.add(this.logic),e.play()))}get mode(){return this._mode}set mode(e){this._mode!==e&&(this._mode=e)}paint(){var e;null==(e=this.context)||e.paint()}delete(){var e;null==(e=this.painter)||e.delete(),this.painter=null,this.context&&(this.context.delete(),this.context=null),this.offscreen&&(this.offscreen.delete(),this.offscreen=null)}}function R(e,t,n,s,i,r){const a=[(e.type+.5)/(k.Unknown+1),(e.index+1.5)/(t.length+2)];n.add([...s,e.radius],[...i,e.radius],a,a);const c=new o.$Rn,l=1.5*e.radius;c.add([...s,l],[...i,l],a,a),e.type!==k.Liaison&&r.set(e.index,c)}function U(e,t){var n;return e.type===k.Liaison?H(null!=(n=e.parent)?n:e,t):[e.rank*t,e.distanceFromSoma,0]}function H(e,t){if(e.type===k.Liaison){const[n]=e.children;return U(null!=n?n:e,t)}return[e.rank*t,e.distanceFromSoma+e.length,0]}class W{constructor(e){this.segments3D=new Map,this.segmentsDendrogram=new Map,this.structure=new B(e);const t=function(e,t){const n=new o.$Rn;return e.forEach(s=>{const{start:i,end:r}=s;R(s,e,n,i,r,t)}),n}(this.structure,this.segments3D);this.dataset3D=t.makeDataset();const n=function(e,t){const n=Math.abs(e.bbox.max[0]-e.bbox.min[0]),s=new o.$Rn;return e.forEach(i=>{const r=U(i,n),o=H(i,n);R(i,e,s,r,o,t)}),s}(this.structure,this.segmentsDendrogram);this.datasetDendrogram=n.makeDataset()}}class ${constructor(){this._canvas=null,this._morphology=null}get canvas(){return this._canvas}set canvas(e){this._canvas!==e&&(this._canvas=e,e?this.initializeWhenReady():this.delete())}get morphology(){return this._morphology}set morphology(e){JSON.stringify(this._morphology)!==JSON.stringify(e)&&(this._morphology=e,this.initializeWhenReady())}initializeWhenReady(){const{canvas:e,morphology:t}=this;e&&t&&this.initialize(e,new W(t))}}const q=new Map,J=class e extends ${constructor(){super(...arguments),this.disableElectrodes=!1,this.id=e.id++,this.eventError=new o.QPQ,this.eventPaint=new o.QPQ,this.eventHover=new o.QPQ,this.eventTap=new o.QPQ,this.eventZoom=new o.QPQ,this.eventRestingPosition=new o.QPQ,this.eventHintVisible=new o.QPQ,this.eventForbiddenClick=new o.QPQ,this.view=new F,this._disableSynapses=!1,this._hoverItem={x:0,y:0,offset:0,item:null},this.initialPosition=new o.hNi,this.cameraController=null,this.synapses=[],this.data=null,this.lastCameraChangeTimestamp=0,this.lastCameraState=null,this._clickable=!0,this.zoomOut=()=>{this.zoom-=.1},this.zoomIn=()=>{this.zoom+=.1},this.resetCamera=()=>{const{view:e,cameraController:t}=this,{context:n}=e;if(!n||!t)return;const{zoom:s}=this;t.reset(.3333,{onAction:e=>{this.eventZoom.dispatch((0,o.qx1)(e,0,1,s,0))},onEnd:()=>this.eventRestingPosition.dispatch(!0)})},this.handlePaint=()=>{const{context:e}=this.view;e&&(this.lastCameraState=e.camera.getCurrentState(),this.eventPaint.dispatch())}}get mode(){return this.view.mode}set mode(e){this.view.mode=e}get disableSynapses(){return this._disableSynapses}set disableSynapses(e){this._disableSynapses=e;const{painter:t}=this.view;t&&(t.synapsesEnabled=!e)}get clickable(){return this._clickable}set clickable(e){var t;this._clickable=e,null==(t=this.view.context)||t.paint()}get hoverItem(){return this._hoverItem}set hoverItem(e){this._hoverItem=e,this.eventHover.dispatch(e)}get zoom(){const{view:e,cameraController:t}=this,{context:n}=e;return n&&t?this.toNormalizedZoom(t.zoom):0}set zoom(e){const{cameraController:t}=this;if(!t)return;if(Math.abs(e-this.zoom)<1e-6)return;0!==e&&this.eventRestingPosition.dispatch(!1);const n=this.toControllerZoom(e);t.zoom=n,this.eventZoom.dispatch(e),this.view.paint()}getCameraMatrix(){const{context:e}=this.view;if(!e)return new o.MC5;const{camera:t}=e;return new o.MC5(t.matrixProjection).multiply(t.matrixModelView)}delete(){this.view.delete()}getSectionCoordinates(e,t){var n,s;const i=null==(n=this.data)?void 0:n.structure;if(!i)return new o.hNi;const r=null!=(s=i.getSegmentsOfSection(e))?s:[],a=r.reduce((e,t)=>e+t.length,0),c=a*t;let l=0;for(const e of r){const t=l;if(l+=e.length,l>=c){const n=(c-t)/e.length;return o.hNi.newFromMix(e.start,e.end,n)}}return new o.hNi}getSegment(e,t){var n;const s=null==(n=this.data)?void 0:n.structure;if(!s)return null;const i=s.getSegmentsOfSection(e);if(!i)return null;const r=i.reduce((e,t)=>e+t.length,0),o=r*t;let a=0;for(const e of i)if(a+=e.length,a>=o)return e;return null}showSynapses(e){this.synapses=e;const{context:t,painter:n}=this.view;t&&n&&(n.synapses=e)}initialize(e,t){this.data=t;const n=this.initContext(e,t);this.initPainter(n,t),n.eventPaint.addListener(this.handlePaint),this.initOffscreen(n,t),this.eventHintVisible.dispatch(!1)}initContext(e,t){const n=new o.tfp(e,{alpha:!1,antialias:!0});n.eventWebGLContextRestored.addListener(()=>{this.delete(),globalThis.requestAnimationFrame(()=>this.initialize(e,t))}),this.view.context=n;const{camera:s,zoomMin:i,zoomMax:r}=function({bbox:e,bboxSoma:t,bboxDendrites:n}){const s=new o.xNY({transfo:{distance:5,position:e.center},near:1});s.screenHeight=s.screenWidth;const i=a(s,n,1.1),r=(c=i)>(l=a(s,e,1.5))?c:1.1*l;var c,l;const h=function(e,t){return e<t?e:.9*t}(a(s,t,3),i),d=i/r,m=i/h;return s.transfo.distance=i,{camera:s,zoomMin:d,zoomMax:m}}(t.structure);return n.camera=s,this.initialPosition.from(n.camera.transfo.position),this.initCameraController(n,i,r),this.lastCameraState&&(n.camera.setCurrentState(this.lastCameraState),this.eventRestingPosition.dispatch(!1)),n}initPainter(e,t){const n=new Y(e,t);return this.view.painter=n,n.synapses=this.synapses,this.view.painter=n,n}initOffscreen(e,t){const{view:n}=this;n.offscreen=new f(e),n.offscreen.data=t,e.inputs.pointer.eventHover.addListener(t=>{var s,i;const{data:r}=this,{painter:o}=n;if(!o||!r)return;const{x:a,y:l}=t.current,h=null!=(i=null==(s=n.offscreen)?void 0:s.getItemAt(a,l))?i:null;if(h!==this.hoverItem.item){o.highlight(null);let t=0;if(h){const n=this.segments.get(h.index);o.highlight(n),t=c(r.structure,h,e.camera,a,l)}else o.highlight(null);this.hoverItem={x:a,y:l,offset:t,item:null!=h?h:null},n.paint(),this.eventHintVisible.dispatch(!0)}}),e.inputs.pointer.eventTap.addListener(e=>{var t,n;if(this.disableElectrodes)return;if(!this.clickable)return void this.eventForbiddenClick.dispatch();if(Date.now()-this.lastCameraChangeTimestamp<300)return;const{data:s,view:i}=this;if(!i.context||!s)return;const{x:r,y:o}=e,a=null!=(n=null==(t=i.offscreen)?void 0:t.getItemAt(r,o))?n:null;if(a){const e=c(s.structure,a,i.context.camera,r,o);this.hoverItem={x:r,y:o,offset:e,item:null!=a?a:null},this.eventTap.dispatch({x:r,y:o,item:this.hoverItem.item,offset:e}),this.eventHintVisible.dispatch(!1)}})}initCameraController(e,t,n){this.cameraController&&this.cameraController.detach();const s=new o.pwt(e,{inertiaOrbit:500,inertiaZoom:250,minZoom:t,maxZoom:n,speedZoom:1,onZoomRequest:({zoom:e})=>(this.eventZoom.dispatch(this.toNormalizedZoom(e)),!0)});this.cameraController=s,s.eventChange.addListener(()=>{this.lastCameraChangeTimestamp=Date.now(),this.eventRestingPosition.dispatch(!1)})}get segments(){const{data:e}=this;return e?"3d"===this.mode?e.segments3D:e.segmentsDendrogram:q}toNormalizedZoom(e){const{cameraController:t}=this;if(!t)return 0;const{minZoom:n,maxZoom:s}=t;return e<1?(0,o.qx1)(e,1,n,0,-1,!0):(0,o.qx1)(e,1,s,0,1,!0)}toControllerZoom(e){const{cameraController:t}=this;if(!t)return 1;const{minZoom:n,maxZoom:s}=t;return e<0?(0,o.qx1)(e,0,-1,1,n,!0):(0,o.qx1)(e,0,1,1,s,!0)}};J.id=0;let G=J;var X=n(484),K=n.n(X),ee=n(13),te=n.n(ee),ne=n(335),se=n.n(ne),ie=n(380),re=n.n(ie),oe=n(368),ae=n.n(oe),ce=n(853),le=n.n(ce),he=n(955),de={};de.styleTagTransform=le(),de.setAttributes=re(),de.insert=se().bind(null,"head"),de.domAPI=te(),de.insertStyleElement=ae(),K()(he.A,de);const me=he.A&&he.A.locals?he.A.locals:void 0;function ue({className:e}){const t=function(e){const t=i.useRef(null);return t.current||(t.current=new G,t.current.morphology=e),i.useEffect(()=>{t.current&&(t.current.morphology=e)},[e]),i.useEffect(()=>()=>{const e=t.current;e&&e.delete()},[]),t.current}(r.U.morphology.useValue()),n=function(e,t){const[n,s]=i.useState({x:0,y:0,item:null,offset:0});return i.useEffect(()=>{if(t)return t.addListener(s),()=>t.removeListener(s)},[t]),n}(0,t.eventHover),{item:o}=n;return(0,s.jsxs)("div",{className:ge(e,me.viewer),children:[(0,s.jsxs)("aside",{children:[(0,s.jsx)("h1",{children:"Morphology"}),o&&(0,s.jsxs)("div",{className:me.grid,children:[(0,s.jsx)("div",{children:"Name:"}),(0,s.jsx)("b",{children:o.name}),(0,s.jsx)("div",{children:"Section:"}),(0,s.jsx)("b",{children:o.sectionName}),(0,s.jsx)("div",{children:"Segment:"}),(0,s.jsx)("b",{children:o.segmentIndex}),(0,s.jsx)("div",{children:"Leaves:"}),(0,s.jsx)("b",{children:o.leavesCount}),(0,s.jsx)("div",{children:"Max length:"}),(0,s.jsx)("b",{children:o.maxLength}),(0,s.jsx)("div",{children:"Children:"}),(0,s.jsx)("b",{children:o.children.length}),(0,s.jsx)("div",{children:"Radius:"}),(0,s.jsx)("b",{children:o.radius})]})]}),(0,s.jsx)(pe,{manager:t})]})}const pe=i.memo(function({manager:e}){return(0,s.jsx)("canvas",{ref:t=>(e.canvas=t,()=>{e.canvas=null})})});function ge(...e){return e.filter(e=>"string"==typeof e).join(" ")}function fe(){return(0,s.jsx)(ue,{})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDTCxTQUFDLEtBQUcsU0FBQXJHLEVBQUtrRSxTQUFTbkQsVUFDbEIsU0FBQyxPQUFJLHNCQUNMLFNBQUMsS0FBRyxTQUFBZixFQUFLaUgsZ0JBSXJCLFNBQUNnUCxHQUFBLENBQU9iLGNBR3BCLENBRUEsTUFBTWEsR0FBUyxPQUVmLFVBQXVCLFFBQUViLElBUXJCLE9BQU8sU0FBQyxVQUFPYyxJQVBNdFQsSUFDakJ3UyxFQUFReFMsT0FBU0EsRUFDVixLQUNId1MsRUFBUXhTLE9BQVMsUUFLN0IsR0FFQSxTQUFTa1QsTUFBUUssR0FDYixPQUFPQSxFQUFRdlEsT0FBUXdRLEdBQXVCLGlCQUFSQSxHQUFrQk4sS0FBSyxJQUNqRSxDRXJFZSxTQUFTTyxLQUNwQixPQUFPLFNBQUNuQixHQUFNLEdBQ2xCLEMiLCJzb3VyY2VzIjpbIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9zdHVkaWVzL2RlbmRyb2dyYW0vc3JjL2NvbXBvbmVudHMvVmlld2VyL1ZpZXdlci5tb2R1bGUuY3NzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvY2FtZXJhLnRzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvbWF0aC50cyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9zdHVkaWVzL2RlbmRyb2dyYW0vc3JjL3dlYmdsLW5ldXJvbi1zZWxlY3Rvci9wYWludGVyL29mZnNjcmVlbi1wYWludGVyL21hdGVyaWFsLWluZGV4LnRzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvb2Zmc2NyZWVuLXBhaW50ZXIvb2Zmc2NyZWVuLXBhaW50ZXIudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci90cmVlLnRzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvc3RydWN0dXJlLnRzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvcGFpbnRlcnMvY29udGFudHMudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci9wYWludGVycy9oaWdobGlnaHQudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci9wYWludGVycy9zeW5hcHNlcy50cyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9zdHVkaWVzL2RlbmRyb2dyYW0vc3JjL3dlYmdsLW5ldXJvbi1zZWxlY3Rvci9wYWludGVyL3BhaW50ZXJzL3BhaW50ZXIudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci90cmFuc2l0aW9uLnRzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvd2ViZ2wtbmV1cm9uLXNlbGVjdG9yL3BhaW50ZXIvc2VnbWVudHMudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci9tb3JwaG9sb2d5LWRhdGEudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy93ZWJnbC1uZXVyb24tc2VsZWN0b3IvcGFpbnRlci9pbml0aWFsaXplci50cyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9zdHVkaWVzL2RlbmRyb2dyYW0vc3JjL3dlYmdsLW5ldXJvbi1zZWxlY3Rvci9wYWludGVyL21hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vZGVuZHJvZ3JhbS8uL3NyYy9jb21wb25lbnRzL1ZpZXdlci9WaWV3ZXIubW9kdWxlLmNzcz9iZDIwIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL3N0dWRpZXMvZGVuZHJvZ3JhbS9zcmMvY29tcG9uZW50cy9WaWV3ZXIvVmlld2VyLnRzeCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9zdHVkaWVzL2RlbmRyb2dyYW0vc3JjL3V0aWwvdXRpbHMudHMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvc3R1ZGllcy9kZW5kcm9ncmFtL3NyYy9hcHAvcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jc3MtbG9hZGVyQDYuMTEuMF93ZWJwYWNrQDUuMTA1LjAvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jc3MtbG9hZGVyQDYuMTEuMF93ZWJwYWNrQDUuMTA1LjAvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAuc3JjLWNvbXBvbmVudHMtVmlld2VyLVZpZXdlci1tb2R1bGVfdmlld2VyXzJ5Tlp0VyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICAtLXNpemU6IDMwMHB4O1xuXG4gICAgPiBhc2lkZSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB3aWR0aDogdmFyKC0tc2l6ZSk7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2ZmZjtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzExMTtcbiAgICAgICAgY29sb3I6ICNlZWU7XG4gICAgICAgIHBhZGRpbmc6IDFlbTtcbiAgICAgICAgei1pbmRleDogMjtcblxuICAgICAgICAuc3JjLWNvbXBvbmVudHMtVmlld2VyLVZpZXdlci1tb2R1bGVfZ3JpZF9IMjRldGUge1xuICAgICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byAxZnI7XG4gICAgICAgICAgICBnYXA6IDAuNWVtIDFlbTtcblxuICAgICAgICAgICAgPiBkaXYge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgPiBiIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgPiBjYW52YXMge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IHZhcigtLXNpemUpO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSB2YXIoLS1zaXplKSk7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICB9XG59XG5gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9jb21wb25lbnRzL1ZpZXdlci9WaWV3ZXIubW9kdWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtJQUNJLGtCQUFrQjtJQUNsQixPQUFPO0lBQ1AsTUFBTTtJQUNOLFdBQVc7SUFDWCxZQUFZO0lBQ1osYUFBYTs7SUFFYjtRQUNJLGtCQUFrQjtRQUNsQixPQUFPO1FBQ1AsTUFBTTtRQUNOLGtCQUFrQjtRQUNsQixZQUFZO1FBQ1osNEJBQTRCO1FBQzVCLHNCQUFzQjtRQUN0QixXQUFXO1FBQ1gsWUFBWTtRQUNaLFVBQVU7O1FBRVY7WUFDSSxhQUFhO1lBQ2IsK0JBQStCO1lBQy9CLGNBQWM7O1lBRWQ7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxVQUFVO1lBQ2Q7UUFDSjtJQUNKOztJQUVBO1FBQ0ksa0JBQWtCO1FBQ2xCLGlCQUFpQjtRQUNqQixNQUFNO1FBQ04sK0JBQStCO1FBQy9CLFlBQVk7SUFDaEI7QUFDSlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIudmlld2VyIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBsZWZ0OiAwO1xcbiAgICB0b3A6IDA7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIC0tc2l6ZTogMzAwcHg7XFxuXFxuICAgID4gYXNpZGUge1xcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgICAgbGVmdDogMDtcXG4gICAgICAgIHRvcDogMDtcXG4gICAgICAgIHdpZHRoOiB2YXIoLS1zaXplKTtcXG4gICAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNmZmY7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExO1xcbiAgICAgICAgY29sb3I6ICNlZWU7XFxuICAgICAgICBwYWRkaW5nOiAxZW07XFxuICAgICAgICB6LWluZGV4OiAyO1xcblxcbiAgICAgICAgLmdyaWQge1xcbiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XFxuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmcjtcXG4gICAgICAgICAgICBnYXA6IDAuNWVtIDFlbTtcXG5cXG4gICAgICAgICAgICA+IGRpdiB7XFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgPiBiIHtcXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG4gICAgPiBjYW52YXMge1xcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgICAgbGVmdDogdmFyKC0tc2l6ZSk7XFxuICAgICAgICB0b3A6IDA7XFxuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gdmFyKC0tc2l6ZSkpO1xcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xcbiAgICB9XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ubG9jYWxzID0ge1xuXHRcInZpZXdlclwiOiBgc3JjLWNvbXBvbmVudHMtVmlld2VyLVZpZXdlci1tb2R1bGVfdmlld2VyXzJ5Tlp0V2AsXG5cdFwiZ3JpZFwiOiBgc3JjLWNvbXBvbmVudHMtVmlld2VyLVZpZXdlci1tb2R1bGVfZ3JpZF9IMjRldGVgXG59O1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJpbXBvcnQgeyB0eXBlIEFycmF5TnVtYmVyMywgdHlwZSBUZ2RDYW1lcmEsIFRnZENhbWVyYVBlcnNwZWN0aXZlIH0gZnJvbSAnQHRvbG9rb2Jhbi90Z2QnO1xuXG5pbnRlcmZhY2UgQm91bmRpbmdCb3gge1xuICBtaW46IEFycmF5TnVtYmVyMztcbiAgbWF4OiBBcnJheU51bWJlcjM7XG4gIGNlbnRlcjogQXJyYXlOdW1iZXIzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNhbWVyYSh7XG4gIGJib3gsXG4gIGJib3hTb21hLFxuICBiYm94RGVuZHJpdGVzLFxufToge1xuICBiYm94OiBCb3VuZGluZ0JveDtcbiAgYmJveFNvbWE6IEJvdW5kaW5nQm94O1xuICBiYm94RGVuZHJpdGVzOiBCb3VuZGluZ0JveDtcbn0pOiB7IGNhbWVyYTogVGdkQ2FtZXJhOyB6b29tTWluOiBudW1iZXI7IHpvb21NYXg6IG51bWJlciB9IHtcbiAgY29uc3QgY2FtZXJhID0gbmV3IFRnZENhbWVyYVBlcnNwZWN0aXZlKHtcbiAgICB0cmFuc2ZvOiB7XG4gICAgICBkaXN0YW5jZTogNSxcbiAgICAgIHBvc2l0aW9uOiBiYm94LmNlbnRlcixcbiAgICB9LFxuICAgIG5lYXI6IDEsXG4gIH0pO1xuICBjYW1lcmEuc2NyZWVuSGVpZ2h0ID0gY2FtZXJhLnNjcmVlbldpZHRoO1xuICBjb25zdCBkaXN0YW5jZSA9IGNvbXB1dGVEaXN0YW5jZShjYW1lcmEsIGJib3hEZW5kcml0ZXMsIDEuMSk7XG4gIGNvbnN0IGRpc3RhbmNlTWF4ID0gZW5zdXJlQmlnZ2VyKGRpc3RhbmNlLCBjb21wdXRlRGlzdGFuY2UoY2FtZXJhLCBiYm94LCAxLjUpKTtcbiAgY29uc3QgZGlzdGFuY2VNaW4gPSBlbnN1cmVTbWFsbGVyKGNvbXB1dGVEaXN0YW5jZShjYW1lcmEsIGJib3hTb21hLCAzKSwgZGlzdGFuY2UpO1xuICBjb25zdCB6b29tTWluID0gZGlzdGFuY2UgLyBkaXN0YW5jZU1heDtcbiAgY29uc3Qgem9vbU1heCA9IGRpc3RhbmNlIC8gZGlzdGFuY2VNaW47XG4gIGNhbWVyYS50cmFuc2ZvLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIHJldHVybiB7IGNhbWVyYSwgem9vbU1pbiwgem9vbU1heCB9O1xufVxuXG5mdW5jdGlvbiBlbnN1cmVTbWFsbGVyKHZhbHVlOiBudW1iZXIsIGxpbWl0OiBudW1iZXIpIHtcbiAgaWYgKHZhbHVlIDwgbGltaXQpIHJldHVybiB2YWx1ZTtcbiAgcmV0dXJuIGxpbWl0ICogMC45O1xufVxuXG5mdW5jdGlvbiBlbnN1cmVCaWdnZXIodmFsdWU6IG51bWJlciwgbGltaXQ6IG51bWJlcikge1xuICBpZiAodmFsdWUgPiBsaW1pdCkgcmV0dXJuIHZhbHVlO1xuICByZXR1cm4gbGltaXQgKiAxLjE7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEaXN0YW5jZShjYW1lcmE6IFRnZENhbWVyYSwgYmJveDogQm91bmRpbmdCb3gsIHNjYWxlOiBudW1iZXIpIHtcbiAgY29uc3Qgd2lkdGggPVxuICAgIDIgKlxuICAgIHNjYWxlICpcbiAgICBNYXRoLm1heCgxLCBNYXRoLmFicyhiYm94LmNlbnRlclswXSAtIGJib3gubWluWzBdKSwgTWF0aC5hYnMoYmJveC5jZW50ZXJbMF0gLSBiYm94Lm1heFswXSkpO1xuICBjb25zdCBoZWlnaHQgPVxuICAgIDIgKlxuICAgIHNjYWxlICpcbiAgICBNYXRoLm1heCgxLCBNYXRoLmFicyhiYm94LmNlbnRlclsxXSAtIGJib3gubWluWzFdKSwgTWF0aC5hYnMoYmJveC5jZW50ZXJbMV0gLSBiYm94Lm1heFsxXSkpO1xuICBjYW1lcmEuZml0U3BhY2VBdFRhcmdldCh3aWR0aCwgaGVpZ2h0KTtcbiAgcmV0dXJuIGNhbWVyYS50cmFuc2ZvLmRpc3RhbmNlO1xufVxuIiwiaW1wb3J0IHsgVGdkVmVjNCwgVGdkQ2FtZXJhLCBUZ2RNYXQ0LCBUZ2RWZWMyLCB0Z2RDYWxjQ2xhbXAgfSBmcm9tICdAdG9sb2tvYmFuL3RnZCc7XG5cbmltcG9ydCB7IFN0cnVjdHVyZSwgU3RydWN0dXJlSXRlbSB9IGZyb20gJy4vc3RydWN0dXJlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVTZWN0aW9uT2Zmc2V0KFxuICBzdHJ1Y3R1cmU6IFN0cnVjdHVyZSxcbiAgaXRlbTogU3RydWN0dXJlSXRlbSxcbiAgY2FtZXJhOiBUZ2RDYW1lcmEsXG4gIHhTY3JlZW46IG51bWJlcixcbiAgeVNjcmVlbjogbnVtYmVyXG4pIHtcbiAgY29uc3Qgb2Zmc2V0U2VnbWVudCA9IGNvbXB1dGVTZWdtZW50T2Zmc2V0KGl0ZW0sIGNhbWVyYSwgeFNjcmVlbiwgeVNjcmVlbik7XG4gIGNvbnN0IHNlZ21lbnRzID0gc3RydWN0dXJlLmdldFNlZ21lbnRzT2ZTZWN0aW9uKGl0ZW0uc2VjdGlvbk5hbWUpO1xuICBsZXQgZGlzdGFuY2UgPSAwO1xuICBsZXQgdG90YWxEaXN0YW5jZSA9IDA7XG4gIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgIHRvdGFsRGlzdGFuY2UgKz0gc2VnbWVudC5sZW5ndGg7XG4gICAgaWYgKHNlZ21lbnQuc2VnbWVudEluZGV4ID09PSBpdGVtLnNlZ21lbnRJbmRleCkge1xuICAgICAgZGlzdGFuY2UgKz0gc2VnbWVudC5sZW5ndGggKiBvZmZzZXRTZWdtZW50O1xuICAgIH0gZWxzZSBpZiAoc2VnbWVudC5zZWdtZW50SW5kZXggPCBpdGVtLnNlZ21lbnRJbmRleCkge1xuICAgICAgZGlzdGFuY2UgKz0gc2VnbWVudC5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiB0b3RhbERpc3RhbmNlID4gMCA/IGRpc3RhbmNlIC8gdG90YWxEaXN0YW5jZSA6IDA7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVTZWdtZW50T2Zmc2V0KFxuICBpdGVtOiBTdHJ1Y3R1cmVJdGVtLFxuICBjYW1lcmE6IFRnZENhbWVyYSxcbiAgeFNjcmVlbjogbnVtYmVyLFxuICB5U2NyZWVuOiBudW1iZXJcbik6IG51bWJlciB7XG4gIGNvbnN0IHN0YXJ0ID0gbmV3IFRnZFZlYzQoLi4uaXRlbS5zdGFydCwgMSk7XG4gIGNvbnN0IGVuZCA9IG5ldyBUZ2RWZWM0KC4uLml0ZW0uZW5kLCAxKTtcbiAgY29uc3QgbWF0cml4ID0gbmV3IFRnZE1hdDQoY2FtZXJhLm1hdHJpeFByb2plY3Rpb24pLm11bHRpcGx5KGNhbWVyYS5tYXRyaXhNb2RlbFZpZXcpO1xuICBzdGFydC5hcHBseU1hdHJpeChtYXRyaXgpO1xuICBzdGFydC5zY2FsZSgxIC8gc3RhcnQudyk7XG4gIGVuZC5hcHBseU1hdHJpeChtYXRyaXgpO1xuICBlbmQuc2NhbGUoMSAvIGVuZC53KTtcbiAgY29uc3QgdmVjVSA9IG5ldyBUZ2RWZWMyKGVuZC54IC0gc3RhcnQueCwgZW5kLnkgLSBzdGFydC55KTtcbiAgY29uc3QgbGVuZ3RoID0gdmVjVS5zaXplO1xuICB2ZWNVLm5vcm1hbGl6ZSgpO1xuICBjb25zdCB2ZWNWID0gbmV3IFRnZFZlYzIoeFNjcmVlbiAtIHN0YXJ0LngsIHlTY3JlZW4gLSBzdGFydC55KTtcbiAgY29uc3QgZGlzdGFuY2UgPSB2ZWNVLmRvdCh2ZWNWKTtcbiAgcmV0dXJuIHRnZENhbGNDbGFtcChsZW5ndGggPiAwID8gZGlzdGFuY2UgLyBsZW5ndGggOiAwLCAwLCAxKTtcbn1cbiIsImltcG9ydCB7IHRnZENvZGVGdW5jdGlvbl9mbG9hdDAxVG9WZWMzLCBUZ2RNYXRlcmlhbCB9IGZyb20gXCJAdG9sb2tvYmFuL3RnZFwiXG5cbmV4cG9ydCBjbGFzcyBNYXRlcmlhbEluZGV4IGV4dGVuZHMgVGdkTWF0ZXJpYWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICB2YXJ5aW5nczoge1xuICAgICAgICAgICAgICAgIHZhckNvbG9yOiBcInZlYzNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHRyYVZlcnRleFNoYWRlckZ1bmN0aW9uczoge1xuICAgICAgICAgICAgICAgIC4uLnRnZENvZGVGdW5jdGlvbl9mbG9hdDAxVG9WZWMzKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmVydGV4U2hhZGVyQ29kZTogW1xuICAgICAgICAgICAgICAgIFwidmFyQ29sb3IgPSBmbG9hdDAxVG9WZWMzKG1peChhdHRVVjFfQS55LCBhdHRVVjFfQi55LCB1bmlNaXgpKTtcIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBmcmFnbWVudFNoYWRlckNvZGU6IFtcInJldHVybiB2ZWM0KHZhckNvbG9yLCAxKTtcIl0sXG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTW9ycGhvbG9neURhdGEgfSBmcm9tIFwiLi8uLi9tb3JwaG9sb2d5LWRhdGFcIlxuLyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuaW1wb3J0IHtcbiAgICBUZ2RDb250ZXh0LFxuICAgIFRnZERhdGFzZXQsXG4gICAgVGdkUGFpbnRlckNsZWFyLFxuICAgIFRnZFBhaW50ZXJHcm91cCxcbiAgICBUZ2RQYWludGVyU2VnbWVudHNNb3JwaGluZyxcbiAgICBUZ2RQYWludGVyU3RhdGUsXG4gICAgd2ViZ2xQcmVzZXREZXB0aCxcbn0gZnJvbSBcIkB0b2xva29iYW4vdGdkXCJcblxuaW1wb3J0IHsgU3RydWN0dXJlSXRlbSB9IGZyb20gXCIuLi9zdHJ1Y3R1cmVcIlxuaW1wb3J0IHsgTWF0ZXJpYWxJbmRleCB9IGZyb20gXCIuL21hdGVyaWFsLWluZGV4XCJcblxuZXhwb3J0IGNsYXNzIE9mZnNjcmVlblBhaW50ZXIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgb2Zmc2NyZWVuQ2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcygxLCAxKVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBvZmZzY3JlZW5Db250ZXh0OiBUZ2RDb250ZXh0XG5cbiAgICBwcml2YXRlIF9kYXRhOiBNb3JwaG9sb2d5RGF0YSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBncm91cCA9IG5ldyBUZ2RQYWludGVyR3JvdXAoKVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBvbnNjcmVlbkNvbnRleHQ6IFRnZENvbnRleHQpIHtcbiAgICAgICAgb25zY3JlZW5Db250ZXh0LmV2ZW50UGFpbnQuYWRkTGlzdGVuZXIodGhpcy5wYWludClcbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBUZ2RDb250ZXh0KHRoaXMub2Zmc2NyZWVuQ2FudmFzLCB7XG4gICAgICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUsXG4gICAgICAgICAgICBhbnRpYWxpYXM6IGZhbHNlLFxuICAgICAgICAgICAgYWxwaGE6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICBjb250ZXh0LmNhbWVyYSA9IG9uc2NyZWVuQ29udGV4dC5jYW1lcmFcbiAgICAgICAgdGhpcy5vZmZzY3JlZW5Db250ZXh0ID0gY29udGV4dFxuICAgICAgICBjb250ZXh0LmFkZCh0aGlzLmdyb3VwKVxuICAgICAgICB0aGlzLnBhaW50KClcbiAgICB9XG5cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFcbiAgICB9XG5cbiAgICBzZXQgZGF0YShkYXRhOiBNb3JwaG9sb2d5RGF0YSB8IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGF0YSA9PT0gdGhpcy5fZGF0YSkgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGFcbiAgICAgICAgdGhpcy5ncm91cC5kZWxldGUoKVxuICAgICAgICBpZiAoIWRhdGEpIHJldHVyblxuXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLm9mZnNjcmVlbkNvbnRleHRcbiAgICAgICAgY29uc3QgZGF0YXNldHNQYWlyczogW1RnZERhdGFzZXQsIFRnZERhdGFzZXRdW10gPSBbXG4gICAgICAgICAgICBbZGF0YS5kYXRhc2V0M0QsIGRhdGEuZGF0YXNldERlbmRyb2dyYW1dLFxuICAgICAgICBdXG4gICAgICAgIGNvbnN0IHBhaW50ZXIgPSBuZXcgVGdkUGFpbnRlclNlZ21lbnRzTW9ycGhpbmcoY29udGV4dCwge1xuICAgICAgICAgICAgcm91bmRuZXNzOiAzLFxuICAgICAgICAgICAgbWluUmFkaXVzOiAzLFxuICAgICAgICAgICAgZGF0YXNldHNQYWlycyxcbiAgICAgICAgICAgIG1hdGVyaWFsOiBuZXcgTWF0ZXJpYWxJbmRleCgpLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmdyb3VwLmFkZChcbiAgICAgICAgICAgIG5ldyBUZ2RQYWludGVyQ2xlYXIoY29udGV4dCwgeyBjb2xvcjogWzAsIDAsIDAsIDFdLCBkZXB0aDogMSB9KSxcbiAgICAgICAgICAgIG5ldyBUZ2RQYWludGVyU3RhdGUoY29udGV4dCwge1xuICAgICAgICAgICAgICAgIGRlcHRoOiB3ZWJnbFByZXNldERlcHRoLmxlc3NPckVxdWFsLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbcGFpbnRlcl0sXG4gICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgfVxuXG4gICAgZ2V0SXRlbUF0KHhTY3JlZW46IG51bWJlciwgeVNjcmVlbjogbnVtYmVyKTogU3RydWN0dXJlSXRlbSB8IG51bGwge1xuICAgICAgICBjb25zdCB7IGRhdGEsIG9mZnNjcmVlbkNvbnRleHQ6IGNvbnRleHQgfSA9IHRoaXNcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGNvbnRleHQud2lkdGggKiBjb250ZXh0LmhlaWdodCAqIDQpXG4gICAgICAgIGNvbnRleHQuZ2wucmVhZFBpeGVscyhcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgY29udGV4dC53aWR0aCxcbiAgICAgICAgICAgIGNvbnRleHQuaGVpZ2h0LFxuICAgICAgICAgICAgY29udGV4dC5nbC5SR0JBLFxuICAgICAgICAgICAgY29udGV4dC5nbC5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgYnl0ZXNcbiAgICAgICAgKVxuICAgICAgICBjb25zdCB7IHN0cnVjdHVyZSB9ID0gZGF0YVxuICAgICAgICBjb25zdCBbUiwgRywgQl0gPSBjb250ZXh0LnJlYWRQaXhlbCh4U2NyZWVuLCB5U2NyZWVuKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IChSICsgKEcgPDwgOCkgKyAoQiA8PCAxNikpIC8gMHhmZmZmZmZcbiAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKChzdHJ1Y3R1cmUubGVuZ3RoICsgMikgKiB2YWx1ZSkgLSAxXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiBzdHJ1Y3R1cmUubGVuZ3RoIC0gMSkgcmV0dXJuIG51bGxcblxuICAgICAgICByZXR1cm4gc3RydWN0dXJlLmdldChpbmRleClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHBhaW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9uc2NyZWVuQ29udGV4dCwgb2Zmc2NyZWVuQ29udGV4dCwgb2Zmc2NyZWVuQ2FudmFzIH0gPSB0aGlzXG4gICAgICAgIG9mZnNjcmVlbkNvbnRleHQuY2FtZXJhID0gb25zY3JlZW5Db250ZXh0LmNhbWVyYVxuICAgICAgICBjb25zdCB7IGNhbnZhcyB9ID0gb25zY3JlZW5Db250ZXh0XG4gICAgICAgIGNvbnN0IHcgPSBNYXRoLmNlaWwoY2FudmFzLndpZHRoIC8gMilcbiAgICAgICAgY29uc3QgaCA9IE1hdGguY2VpbChjYW52YXMuaGVpZ2h0IC8gMilcbiAgICAgICAgb2Zmc2NyZWVuQ2FudmFzLndpZHRoID0gd1xuICAgICAgICBvZmZzY3JlZW5DYW52YXMuaGVpZ2h0ID0gaFxuICAgICAgICBvZmZzY3JlZW5Db250ZXh0LnBhaW50KClcbiAgICB9XG5cbiAgICBkZWxldGUoKSB7XG4gICAgICAgIHRoaXMub25zY3JlZW5Db250ZXh0LmV2ZW50UGFpbnQucmVtb3ZlTGlzdGVuZXIodGhpcy5wYWludClcbiAgICAgICAgdGhpcy5vZmZzY3JlZW5Db250ZXh0LmRlbGV0ZSgpXG4gICAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBBcnJheU51bWJlcjMgfSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuaW1wb3J0IHsgU3RydWN0dXJlSXRlbSwgU3RydWN0dXJlSXRlbVR5cGUgfSBmcm9tIFwiLi9zdHJ1Y3R1cmVcIlxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbFRyZWUoaXRlbXM6IFN0cnVjdHVyZUl0ZW1bXSk6IFN0cnVjdHVyZUl0ZW0ge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTdHJ1Y3R1cmVJdGVtPigpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSBtYXAuc2V0KGtleTNEKGl0ZW0uZW5kKSwgaXRlbSlcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW0ucGFyZW50KSBjb250aW51ZVxuXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXQoa2V5M0QoaXRlbS5zdGFydCkpXG4gICAgICAgIGlmICghcGFyZW50KSBjb250aW51ZVxuXG4gICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGl0ZW0pXG4gICAgICAgIGl0ZW0ucGFyZW50ID0gcGFyZW50XG4gICAgfVxuICAgIC8vIFJvb3RzOiBpdGVtcyB3aXRob3V0IHBhcmVudHMuXG4gICAgY29uc3QgW3Jvb3QsIC4uLm9ycGhhbnNdID0gaXRlbXMuZmlsdGVyKChpdGVtKSA9PiAhaXRlbS5wYXJlbnQpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIG9ycGhhbnMpIHtcbiAgICAgICAgcm9vdC5jaGlsZHJlbi5wdXNoKGl0ZW0pXG4gICAgICAgIGl0ZW0ucGFyZW50ID0gcm9vdFxuICAgIH1cbiAgICBwb3B1bGF0ZVRyZWUocm9vdClcbiAgICBjb21wdXRlUmFua3Mocm9vdClcbiAgICBhZGRMaWFpc29ucyhyb290LCBpdGVtcylcbiAgICByZXR1cm4gcm9vdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdUcmVlKGl0ZW06IFN0cnVjdHVyZUl0ZW0sIGRlcHRoID0gMCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7XCJ8IFwiLnJlcGVhdChkZXB0aCl9JHtpdGVtLm5hbWV9YClcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBpdGVtLmNoaWxkcmVuKSBkZWJ1Z1RyZWUoY2hpbGQsIGRlcHRoICsgMSlcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGV4KVxuICAgICAgICBjb25zb2xlLmVycm9yKGl0ZW0pXG4gICAgfVxufVxuXG5mdW5jdGlvbiBrZXkzRChbeCwgeSwgel06IEFycmF5TnVtYmVyMykge1xuICAgIGNvbnN0IFBSRUNJU0lPTiA9IDNcbiAgICByZXR1cm4gYCR7eC50b0ZpeGVkKFBSRUNJU0lPTil9LyR7eS50b0ZpeGVkKFBSRUNJU0lPTil9LyR7ei50b0ZpeGVkKFBSRUNJU0lPTil9YFxufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZVRyZWUoaXRlbTogU3RydWN0dXJlSXRlbSwgZGlzdGFuY2UgPSAwKSB7XG4gICAgaWYgKCFpdGVtKSByZXR1cm5cblxuICAgIGl0ZW0uZGlzdGFuY2VGcm9tU29tYSA9IGRpc3RhbmNlXG4gICAgY29uc3QgbmV3RGlzdGFuY2UgPSBkaXN0YW5jZSArIGl0ZW0ubGVuZ3RoXG4gICAgaXRlbS5sZWF2ZXNDb3VudCA9IGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDAgOiAxXG4gICAgaXRlbS5tYXhMZW5ndGggPSAwXG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBpdGVtLmNoaWxkcmVuKSB7XG4gICAgICAgIHBvcHVsYXRlVHJlZShjaGlsZCwgbmV3RGlzdGFuY2UpXG4gICAgICAgIGl0ZW0ubGVhdmVzQ291bnQgKz0gY2hpbGQubGVhdmVzQ291bnRcbiAgICAgICAgaXRlbS5tYXhMZW5ndGggPSBNYXRoLm1heChpdGVtLm1heExlbmd0aCwgY2hpbGQubWF4TGVuZ3RoKVxuICAgIH1cbiAgICBpdGVtLm1heExlbmd0aCArPSBpdGVtLmxlbmd0aFxufVxuXG5mdW5jdGlvbiBjb21wdXRlUmFua3MoaXRlbTogU3RydWN0dXJlSXRlbSwgcmFua01pbiA9IC0xLCByYW5rTWF4ID0gKzEpIHtcbiAgICBpZiAoIWl0ZW0pIHJldHVyblxuXG4gICAgaXRlbS5yYW5rID0gKHJhbmtNaW4gKyByYW5rTWF4KSAvIDJcbiAgICBjb25zdCByYW5rU2l6ZSA9IE1hdGguYWJzKHJhbmtNYXggLSByYW5rTWluKVxuICAgIGxldCByYW5rID0gcmFua01pblxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgaXRlbS5jaGlsZHJlbikge1xuICAgICAgICBjb25zdCByYW5rQ2hpbGRTaXplID0gKHJhbmtTaXplICogY2hpbGQubGVhdmVzQ291bnQpIC8gaXRlbS5sZWF2ZXNDb3VudFxuICAgICAgICBjb21wdXRlUmFua3MoY2hpbGQsIHJhbmssIHJhbmsgKyByYW5rQ2hpbGRTaXplKVxuICAgICAgICByYW5rICs9IHJhbmtDaGlsZFNpemVcbiAgICB9XG59XG5cbi8qKlxuICogV2Ugd2FudCB0byBiZSBhYmxlIHRvIHRyYW5zaXRpb24gc21vb3RobHkgYmV0d2VlbiB0aGUgM0QgdmlldyBhbmQgdGhlIGRlbmRyb2dyYW0gdmlldy5cbiAqIFRoYXQncyB3aHkgd2UgbmVlZCB0byBoYXZlIHRoZSBleGFjdCBzYW1lIG51bWJlciBvZiBzZWdtZW50cyBpbiBib3RoIHZpZXdzLlxuICogVGhlIGBsaWFpc29uc2AgYXJlIG5vbi1pbnRlcmFjdGl2ZSBob3Jpem9udGFsIHNlZ21lbnRzLCB0aGF0IHdpbGwgb255IGhhdmUgYSBub24tbnVsbCBsZW5ndGhcbiAqIGluIGRlbmRyb2dyYW0gbW9kZS5cbiAqL1xuZnVuY3Rpb24gYWRkTGlhaXNvbnMocm9vdDogU3RydWN0dXJlSXRlbSwgaXRlbXM6IFN0cnVjdHVyZUl0ZW1bXSkge1xuICAgIGlmICghcm9vdCkgcmV0dXJuXG5cbiAgICBpZiAocm9vdC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByb290LmNoaWxkcmVuLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSByb290LmNoaWxkcmVuW2luZGV4XVxuICAgICAgICAgICAgY29uc3QgbGlhaXNvbjogU3RydWN0dXJlSXRlbSA9IHtcbiAgICAgICAgICAgICAgICAuLi5jaGlsZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBgJHtyb290Lm5hbWV9ID4gJHtjaGlsZC5uYW1lfWAsXG4gICAgICAgICAgICAgICAgdHlwZTogU3RydWN0dXJlSXRlbVR5cGUuTGlhaXNvbixcbiAgICAgICAgICAgICAgICBpbmRleDogcm9vdC5pbmRleCxcbiAgICAgICAgICAgICAgICBzdGFydDogWy4uLnJvb3QuZW5kXSxcbiAgICAgICAgICAgICAgICBlbmQ6IFsuLi5jaGlsZC5zdGFydF0sXG4gICAgICAgICAgICAgICAgcmFkaXVzOiAxZS0zLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbY2hpbGRdLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChsaWFpc29uKVxuICAgICAgICAgICAgcm9vdC5jaGlsZHJlbltpbmRleF0gPSBsaWFpc29uXG4gICAgICAgICAgICBhZGRMaWFpc29ucyhjaGlsZCwgaXRlbXMpXG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHJvb3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGFkZExpYWlzb25zKGNoaWxkLCBpdGVtcylcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IHR5cGUgQXJyYXlOdW1iZXIzLCBUZ2RWZWMzIH0gZnJvbSBcIkB0b2xva29iYW4vdGdkXCJcblxuaW1wb3J0IHR5cGUgeyBNb3JwaG9sb2d5IH0gZnJvbSBcIi4uL3R5cGVzXCJcbmltcG9ydCB7IGJ1aWxUcmVlLCBkZWJ1Z1RyZWUgfSBmcm9tIFwiLi90cmVlXCJcblxuZXhwb3J0IGVudW0gU3RydWN0dXJlSXRlbVR5cGUge1xuICAgIFNvbWEgPSAwLFxuICAgIC8qKlxuICAgICAqIFdlIG1ha2UgYSBkaWZmZXJlbmNlIGJldHdlZW4gRGVuZHJpdGUgYW5kIEJhc2FsRGVuZHJpdGUuXG4gICAgICogSWYgdGhlIG1vcnBob2xvZ3kgaGFzIG5vIEFwaWNhbERlbmRyaXRlLCB0aGVuIHRoZSBiYXNhbCBkZW5kcml0ZXNcbiAgICAgKiBhcmUgY2FsbGVkIHNpbXBseSBEZW5kcml0ZS5cbiAgICAgKi9cbiAgICBEZW5kcml0ZSxcbiAgICBCYXNhbERlbmRyaXRlLFxuICAgIEFwaWNhbERlbmRyaXRlLFxuICAgIE15ZWxpbixcbiAgICBBeG9uLFxuICAgIFNlbGVjdGVkLFxuICAgIC8qKlxuICAgICAqIENhbiBiZSB1c2VkIGZvciBob3Jpem9udGFsIGxpbmVzIGluIGRlbmRyb2dyYW0gbW9kZS5cbiAgICAgKiBTdWNoIHNlZ21lbnRzIGFyZSBub3QgaW50ZXJhY3RpdmUuXG4gICAgICovXG4gICAgTGlhaXNvbixcbiAgICBVbmtub3duLFxufVxuZXhwb3J0IGludGVyZmFjZSBTdHJ1Y3R1cmVJdGVtIHtcbiAgICBwYXJlbnQ/OiBTdHJ1Y3R1cmVJdGVtXG4gICAgY2hpbGRyZW46IFN0cnVjdHVyZUl0ZW1bXVxuICAgIGluZGV4OiBudW1iZXJcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBzZWN0aW9uTmFtZTogc3RyaW5nXG4gICAgc2VjdGlvbkluZGV4OiBudW1iZXJcbiAgICBzZWdtZW50SW5kZXg6IG51bWJlclxuICAgIHNlZ21lbnRzQ291bnQ6IG51bWJlclxuICAgIHN0YXJ0OiBBcnJheU51bWJlcjNcbiAgICBlbmQ6IEFycmF5TnVtYmVyM1xuICAgIHJhZGl1czogbnVtYmVyXG4gICAgdHlwZTogU3RydWN0dXJlSXRlbVR5cGVcbiAgICBsZW5ndGg6IG51bWJlclxuICAgIGRpc3RhbmNlRnJvbVNvbWE6IG51bWJlclxuICAgIGxlYXZlc0NvdW50OiBudW1iZXJcbiAgICBtYXhMZW5ndGg6IG51bWJlclxuICAgIC8qKlxuICAgICAqIFZhbHVlIGJldHdlZW4gLTEuMCBhbmQgKzEuMFxuICAgICAqXG4gICAgICogVXNlZCBmb3IgZGVuZHJvZ3JhbXMuXG4gICAgICovXG4gICAgcmFuazogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RydWN0dXJlQm91bmRpbmdCb3gge1xuICAgIG1pbjogQXJyYXlOdW1iZXIzXG4gICAgbWF4OiBBcnJheU51bWJlcjNcbiAgICBjZW50ZXI6IEFycmF5TnVtYmVyM1xufVxuXG5leHBvcnQgY2xhc3MgU3RydWN0dXJlIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgcm9vdDogU3RydWN0dXJlSXRlbVxuXG4gICAgcHVibGljIHJlYWRvbmx5IGJib3g6IFN0cnVjdHVyZUJvdW5kaW5nQm94XG5cbiAgICAvKipcbiAgICAgKiBCb3VuZGluZyBib3ggb2YgdGhlIGF4b25cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYmJveFNvbWE6IFN0cnVjdHVyZUJvdW5kaW5nQm94XG5cbiAgICAvKipcbiAgICAgKiBCb3VuZGluZyBib3ggb2YgdGhlIGRlbmRyaXRlcyBvbmx5IChubyBheG9uIG5vciBteWVsaW4pXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGJib3hEZW5kcml0ZXM6IFN0cnVjdHVyZUJvdW5kaW5nQm94XG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgaGFzQXBpY2FsRGVuZHJpdGVzOiBib29sZWFuXG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGl0ZW1zOiBTdHJ1Y3R1cmVJdGVtW10gPSBbXVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZWdtZW50cyA9IG5ldyBNYXA8c3RyaW5nLCBTdHJ1Y3R1cmVJdGVtPigpXG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlZ21lbnRzUGVyU2VjdGlvbiA9IG5ldyBNYXA8c3RyaW5nLCBTdHJ1Y3R1cmVJdGVtW10+KClcblxuICAgIGNvbnN0cnVjdG9yKG1vcnBob2xvZ3k6IE1vcnBob2xvZ3kpIHtcbiAgICAgICAgY29uc3QgYmJveDogU3RydWN0dXJlQm91bmRpbmdCb3ggPSBjcmVhdGVJbml0aWFsQkJveCgpXG4gICAgICAgIGNvbnN0IGJib3hTb21hOiBTdHJ1Y3R1cmVCb3VuZGluZ0JveCA9IGNyZWF0ZUluaXRpYWxCQm94KClcbiAgICAgICAgY29uc3QgYmJveERlbmRyaXRlczogU3RydWN0dXJlQm91bmRpbmdCb3ggPSBjcmVhdGVJbml0aWFsQkJveCgpXG4gICAgICAgIHRoaXMuYmJveCA9IGJib3hcbiAgICAgICAgdGhpcy5iYm94U29tYSA9IGJib3hTb21hXG4gICAgICAgIHRoaXMuYmJveERlbmRyaXRlcyA9IGJib3hEZW5kcml0ZXNcbiAgICAgICAgbGV0IGlzQkJveFNvbWFFbXB0eSA9IHRydWVcbiAgICAgICAgbGV0IGlzQkJveERlbmRyaXRlc0VtcHR5ID0gdHJ1ZVxuICAgICAgICBsZXQgc29tYUNvdW50cyA9IDBcbiAgICAgICAgY29uc3Qgc29tYUNlbnRlciA9IG5ldyBUZ2RWZWMzKClcbiAgICAgICAgY29uc3Qgc2VjdGlvbk5hbWVzID0gT2JqZWN0LmtleXMobW9ycGhvbG9neSlcbiAgICAgICAgbGV0IGhhc0FwaWNhbERlbmRyaXRlcyA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbk5hbWUgb2Ygc2VjdGlvbk5hbWVzKSB7XG4gICAgICAgICAgICBjb25zdCBpc1NvbWEgPSBzZWN0aW9uTmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoXCJzb21hXCIpXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gbW9ycGhvbG9neVtzZWN0aW9uTmFtZV1cbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgbGV0IHNlZ21lbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgc2VnbWVudEluZGV4IDwgc2VjdGlvbi5uc2VnO1xuICAgICAgICAgICAgICAgIHNlZ21lbnRJbmRleCsrXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydDogQXJyYXlOdW1iZXIzID0gW1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnhzdGFydFtzZWdtZW50SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnlzdGFydFtzZWdtZW50SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnpzdGFydFtzZWdtZW50SW5kZXhdLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBjb25zdCBlbmQ6IEFycmF5TnVtYmVyMyA9IFtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi54ZW5kW3NlZ21lbnRJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ueWVuZFtzZWdtZW50SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnplbmRbc2VnbWVudEluZGV4XSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHJlc29sdmVUeXBlKHNlY3Rpb25OYW1lKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBTdHJ1Y3R1cmVJdGVtVHlwZS5BcGljYWxEZW5kcml0ZSlcbiAgICAgICAgICAgICAgICAgICAgaGFzQXBpY2FsRGVuZHJpdGVzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW06IFN0cnVjdHVyZUl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiBzZWN0aW9uLmRpYW1bc2VnbWVudEluZGV4XSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYCR7c2VjdGlvbk5hbWV9WyR7c2VnbWVudEluZGV4fV1gLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkluZGV4OiByZXNvbHZlU2VjdGlvbkluZGV4KHNlY3Rpb25OYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEluZGV4LFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50c0NvdW50OiBzZWN0aW9uLm5zZWcsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogc2VjdGlvbi5sZW5ndGhbc2VnbWVudEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tU29tYTogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVhdmVzQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1heExlbmd0aDogMCxcbiAgICAgICAgICAgICAgICAgICAgcmFuazogMCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50cy5zZXQoaXRlbS5uYW1lLCBpdGVtKVxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9TZWN0aW9uKGl0ZW0pXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgYmJveC5taW4gPSBjb21wdXRlTWluKGJib3gubWluLCBzdGFydCwgaXRlbS5yYWRpdXMpXG4gICAgICAgICAgICAgICAgYmJveC5tYXggPSBjb21wdXRlTWF4KGJib3gubWF4LCBzdGFydCwgaXRlbS5yYWRpdXMpXG4gICAgICAgICAgICAgICAgYmJveC5taW4gPSBjb21wdXRlTWluKGJib3gubWluLCBlbmQsIGl0ZW0ucmFkaXVzKVxuICAgICAgICAgICAgICAgIGJib3gubWF4ID0gY29tcHV0ZU1heChiYm94Lm1heCwgZW5kLCBpdGVtLnJhZGl1cylcbiAgICAgICAgICAgICAgICBpZiAoaXNTb21hKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvbWFDb3VudHMrK1xuICAgICAgICAgICAgICAgICAgICBzb21hQ2VudGVyLmFkZChzdGFydClcbiAgICAgICAgICAgICAgICAgICAgc29tYUNvdW50cysrXG4gICAgICAgICAgICAgICAgICAgIHNvbWFDZW50ZXIuYWRkKGVuZClcbiAgICAgICAgICAgICAgICAgICAgYmJveFNvbWEubWluID0gY29tcHV0ZU1pbihiYm94U29tYS5taW4sIHN0YXJ0LCBpdGVtLnJhZGl1cylcbiAgICAgICAgICAgICAgICAgICAgYmJveFNvbWEubWF4ID0gY29tcHV0ZU1heChiYm94U29tYS5tYXgsIHN0YXJ0LCBpdGVtLnJhZGl1cylcbiAgICAgICAgICAgICAgICAgICAgYmJveFNvbWEubWluID0gY29tcHV0ZU1pbihiYm94U29tYS5taW4sIGVuZCwgaXRlbS5yYWRpdXMpXG4gICAgICAgICAgICAgICAgICAgIGJib3hTb21hLm1heCA9IGNvbXB1dGVNYXgoYmJveFNvbWEubWF4LCBlbmQsIGl0ZW0ucmFkaXVzKVxuICAgICAgICAgICAgICAgICAgICBpc0JCb3hTb21hRW1wdHkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJ1Y3R1cmVJdGVtVHlwZS5EZW5kcml0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJ1Y3R1cmVJdGVtVHlwZS5CYXNhbERlbmRyaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cnVjdHVyZUl0ZW1UeXBlLkFwaWNhbERlbmRyaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cnVjdHVyZUl0ZW1UeXBlLlNvbWEsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKHR5cGUpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmJveERlbmRyaXRlcy5taW4gPSBjb21wdXRlTWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJib3hEZW5kcml0ZXMubWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmFkaXVzXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBiYm94RGVuZHJpdGVzLm1heCA9IGNvbXB1dGVNYXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmJveERlbmRyaXRlcy5tYXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yYWRpdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJib3hEZW5kcml0ZXMubWluID0gY29tcHV0ZU1pbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYm94RGVuZHJpdGVzLm1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yYWRpdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJib3hEZW5kcml0ZXMubWF4ID0gY29tcHV0ZU1heChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYm94RGVuZHJpdGVzLm1heCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yYWRpdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQkJveERlbmRyaXRlc0VtcHR5ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc0FwaWNhbERlbmRyaXRlcykge1xuICAgICAgICAgICAgLy8gSWYgbm8gYXBpY2FsIGRlbmRyaXRlLCB0aGVuIHdlIG5lZWQgdG8gZGlzcGxheSBEZW5kcml0ZSBpbnN0ZWFkIG9mIEJhc2FsRGVuZHJpdGUuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFN0cnVjdHVyZUl0ZW1UeXBlLkJhc2FsRGVuZHJpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID0gU3RydWN0dXJlSXRlbVR5cGUuRGVuZHJpdGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvbWFDb3VudHMgPiAwKSBzb21hQ2VudGVyLnNjYWxlKDEgLyBzb21hQ291bnRzKVxuICAgICAgICBiYm94LmNlbnRlciA9IFsuLi5zb21hQ2VudGVyXSBhcyBBcnJheU51bWJlcjNcbiAgICAgICAgdGhpcy5oYXNBcGljYWxEZW5kcml0ZXMgPSBoYXNBcGljYWxEZW5kcml0ZXNcbiAgICAgICAgaWYgKGlzQkJveFNvbWFFbXB0eSkgY29weUJCb3hJbnRvKGJib3gsIGJib3hTb21hKVxuICAgICAgICBpZiAoaXNCQm94RGVuZHJpdGVzRW1wdHkpIGNvcHlCQm94SW50byhiYm94LCBiYm94RGVuZHJpdGVzKVxuICAgICAgICB0aGlzLnJvb3QgPSBidWlsVHJlZSh0aGlzLml0ZW1zKVxuICAgIH1cblxuICAgIGdldFNlZ21lbnRzT2ZTZWN0aW9uKHNlY3Rpb25OYW1lOiBzdHJpbmcpOiBTdHJ1Y3R1cmVJdGVtW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1BlclNlY3Rpb24uZ2V0KHNlY3Rpb25OYW1lKSA/PyBbXVxuICAgIH1cblxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aFxuICAgIH1cblxuICAgIGdldChpbmRleDogbnVtYmVyKTogU3RydWN0dXJlSXRlbSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zW2luZGV4XVxuICAgICAgICBpZiAoIWl0ZW0pXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICAgICAgICBgSW5kZXggKCR7aW5kZXh9KSBvdXQgb2YgYm91bmRzISBJdGVtcyBhdmFpbGFibGU6ICR7dGhpcy5sZW5ndGh9LmBcbiAgICAgICAgICAgIClcblxuICAgICAgICByZXR1cm4gaXRlbVxuICAgIH1cblxuICAgIGZvckVhY2goY2FsbGJhY2s6IChpdGVtOiBTdHJ1Y3R1cmVJdGVtLCBpbmRleDogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChjYWxsYmFjaylcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFRvU2VjdGlvbihpdGVtOiBTdHJ1Y3R1cmVJdGVtKSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb25Gcm9tTWFwID0gdGhpcy5zZWdtZW50c1BlclNlY3Rpb24uZ2V0KGl0ZW0uc2VjdGlvbk5hbWUpXG4gICAgICAgIGlmIChzZWN0aW9uRnJvbU1hcCkge1xuICAgICAgICAgICAgc2VjdGlvbkZyb21NYXAucHVzaChpdGVtKVxuICAgICAgICAgICAgc2VjdGlvbkZyb21NYXAuc29ydChcbiAgICAgICAgICAgICAgICAoeyBzZWdtZW50SW5kZXg6IGEgfSwgeyBzZWdtZW50SW5kZXg6IGIgfSkgPT4gYSAtIGJcbiAgICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudHNQZXJTZWN0aW9uLnNldChpdGVtLnNlY3Rpb25OYW1lLCBbaXRlbV0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVNaW4oXG4gICAgcHJldjogQXJyYXlOdW1iZXIzLFxuICAgIGN1cnI6IEFycmF5TnVtYmVyMyxcbiAgICByYWRpdXMgPSAwXG4pOiBBcnJheU51bWJlcjMge1xuICAgIHJldHVybiBbXG4gICAgICAgIE1hdGgubWluKHByZXZbMF0sIGN1cnJbMF0gLSByYWRpdXMpLFxuICAgICAgICBNYXRoLm1pbihwcmV2WzFdLCBjdXJyWzFdIC0gcmFkaXVzKSxcbiAgICAgICAgTWF0aC5taW4ocHJldlsyXSwgY3VyclsyXSAtIHJhZGl1cyksXG4gICAgXVxufVxuXG5mdW5jdGlvbiBjb21wdXRlTWF4KFxuICAgIHByZXY6IEFycmF5TnVtYmVyMyxcbiAgICBjdXJyOiBBcnJheU51bWJlcjMsXG4gICAgcmFkaXVzID0gMFxuKTogQXJyYXlOdW1iZXIzIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBNYXRoLm1heChwcmV2WzBdLCBjdXJyWzBdICsgcmFkaXVzKSxcbiAgICAgICAgTWF0aC5tYXgocHJldlsxXSwgY3VyclsxXSArIHJhZGl1cyksXG4gICAgICAgIE1hdGgubWF4KHByZXZbMl0sIGN1cnJbMl0gKyByYWRpdXMpLFxuICAgIF1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVR5cGUoc2VjdGlvbk5hbWU6IHN0cmluZyk6IFN0cnVjdHVyZUl0ZW1UeXBlIHtcbiAgICBjb25zdCBwcmVmaXggPSBzZWN0aW9uTmFtZS5zbGljZSgwLCA0KS50b0xvd2VyQ2FzZSgpXG4gICAgc3dpdGNoIChwcmVmaXgpIHtcbiAgICAgICAgY2FzZSBcInNvbWFcIjpcbiAgICAgICAgICAgIHJldHVybiBTdHJ1Y3R1cmVJdGVtVHlwZS5Tb21hXG4gICAgICAgIGNhc2UgXCJheG9uXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RydWN0dXJlSXRlbVR5cGUuQXhvblxuICAgICAgICBjYXNlIFwiZGVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cnVjdHVyZUl0ZW1UeXBlLkJhc2FsRGVuZHJpdGVcbiAgICAgICAgY2FzZSBcImFwaWNcIjpcbiAgICAgICAgICAgIHJldHVybiBTdHJ1Y3R1cmVJdGVtVHlwZS5BcGljYWxEZW5kcml0ZVxuICAgICAgICBjYXNlIFwibXllbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cnVjdHVyZUl0ZW1UeXBlLk15ZWxpblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFN0cnVjdHVyZUl0ZW1UeXBlLlVua25vd25cbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHNlY3Rpb24gaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgbmFtZSwgc3Vycm91bmRlZCBieSBzcXVhcmUgYnJhY2tldHMuXG4gKlxuICogRXhhbXBsZTogYGRlbmRbMzJdYFxuICovXG5mdW5jdGlvbiByZXNvbHZlU2VjdGlvbkluZGV4KHNlY3Rpb25OYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGkgPSBzZWN0aW9uTmFtZS5pbmRleE9mKFwiW1wiKVxuICAgIGNvbnN0IHN1ZmZpeCA9IHNlY3Rpb25OYW1lLnNsaWNlKGkgKyAxKVxuICAgIHJldHVybiBwYXJzZUludChzdWZmaXguc2xpY2UoMCwgc3VmZml4Lmxlbmd0aCAtIDEpLCAxMClcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5pdGlhbEJCb3goKTogU3RydWN0dXJlQm91bmRpbmdCb3gge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1pbjogW1xuICAgICAgICAgICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICBdLFxuICAgICAgICBtYXg6IFtcbiAgICAgICAgICAgIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSxcbiAgICAgICAgICAgIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSxcbiAgICAgICAgICAgIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSxcbiAgICAgICAgXSxcbiAgICAgICAgY2VudGVyOiBbMCwgMCwgMF0sXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb3B5QkJveEludG8oZnJvbTogU3RydWN0dXJlQm91bmRpbmdCb3gsIHRvOiBTdHJ1Y3R1cmVCb3VuZGluZ0JveCkge1xuICAgIHRvLmNlbnRlciA9IFsuLi5mcm9tLmNlbnRlcl1cbiAgICB0by5tYXggPSBbLi4uZnJvbS5tYXhdXG4gICAgdG8ubWluID0gWy4uLmZyb20ubWluXVxufVxuIiwiaW1wb3J0IHsgU3RydWN0dXJlSXRlbVR5cGUgfSBmcm9tIFwiLi4vc3RydWN0dXJlXCJcblxuZXhwb3J0IGNvbnN0IFBBTEVUVEU6IHN0cmluZ1tdID0gW11cblBBTEVUVEVbU3RydWN0dXJlSXRlbVR5cGUuQXhvbl0gPSBcIiMwN2ZcIlxuUEFMRVRURVtTdHJ1Y3R1cmVJdGVtVHlwZS5EZW5kcml0ZV0gPSBcIiNGNTVcIlxuUEFMRVRURVtTdHJ1Y3R1cmVJdGVtVHlwZS5CYXNhbERlbmRyaXRlXSA9IFwiI0YzM1wiXG5QQUxFVFRFW1N0cnVjdHVyZUl0ZW1UeXBlLkFwaWNhbERlbmRyaXRlXSA9IFwiI0Y4ZlwiXG5QQUxFVFRFW1N0cnVjdHVyZUl0ZW1UeXBlLk15ZWxpbl0gPSBgIzc3OGBcblBBTEVUVEVbU3RydWN0dXJlSXRlbVR5cGUuU29tYV0gPSBcIiNkZGVcIlxuUEFMRVRURVtTdHJ1Y3R1cmVJdGVtVHlwZS5MaWFpc29uXSA9IFwiIzU1NVwiXG5QQUxFVFRFW1N0cnVjdHVyZUl0ZW1UeXBlLlNlbGVjdGVkXSA9IFwiI2ZjMFwiXG5QQUxFVFRFW1N0cnVjdHVyZUl0ZW1UeXBlLlVua25vd25dID0gXCIjYTZmXCJcbiIsImltcG9ydCB7XG4gICAgQXJyYXlOdW1iZXIyLFxuICAgIFRnZENvbnRleHQsXG4gICAgVGdkTGlnaHQsXG4gICAgVGdkTWF0ZXJpYWxEaWZmdXNlLFxuICAgIFRnZFBhaW50ZXJHcm91cCxcbiAgICBUZ2RQYWludGVyU2VnbWVudHMsXG4gICAgVGdkUGFpbnRlclNlZ21lbnRzRGF0YSxcbiAgICBUZ2RQYWludGVyU3RhdGUsXG4gICAgVGdkVmVjMyxcbiAgICB3ZWJnbFByZXNldEJsZW5kLFxuICAgIHdlYmdsUHJlc2V0Q3VsbCxcbiAgICB3ZWJnbFByZXNldERlcHRoLFxufSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuXG5pbXBvcnQgeyBTdHJ1Y3R1cmVJdGVtLCBTdHJ1Y3R1cmVJdGVtVHlwZSB9IGZyb20gXCIuLi9zdHJ1Y3R1cmVcIlxuXG5leHBvcnQgY2xhc3MgUGFpbnRlckhvdmVyIGV4dGVuZHMgVGdkUGFpbnRlckdyb3VwIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb250ZXh0OiBUZ2RDb250ZXh0LFxuICAgICAgICBzZWdtZW50czogVGdkUGFpbnRlclNlZ21lbnRzRGF0YVxuICAgICkge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMuYWRkKFxuICAgICAgICAgICAgbmV3IFRnZFBhaW50ZXJTdGF0ZShjb250ZXh0LCB7XG4gICAgICAgICAgICAgICAgYmxlbmQ6IHdlYmdsUHJlc2V0QmxlbmQuYWRkLFxuICAgICAgICAgICAgICAgIGN1bGw6IHdlYmdsUHJlc2V0Q3VsbC5iYWNrLFxuICAgICAgICAgICAgICAgIGRlcHRoOiB3ZWJnbFByZXNldERlcHRoLmFsd2F5cyxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGdkUGFpbnRlclNlZ21lbnRzKGNvbnRleHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdW5kbmVzczogMzIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5SYWRpdXM6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiBzZWdtZW50cy5tYWtlRGF0YXNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBuZXcgVGdkTWF0ZXJpYWxEaWZmdXNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWzAuOCwgMC42LCAwLjMsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWN1bGFyRXhwb25lbnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY3VsYXJJbnRlbnNpdHk6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrTGlnaHRzVG9DYW1lcmE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IG5ldyBUZ2RMaWdodCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogbmV3IFRnZFZlYzMoMCwgMCwgLTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgVGdkQ29udGV4dCxcbiAgVGdkUGFpbnRlclBvaW50c0Nsb3VkLFxuICBUZ2RQYWludGVyR3JvdXAsXG4gIFRnZFRleHR1cmUyRCxcbiAgdGdkQ2FudmFzQ3JlYXRlRmlsbCxcbn0gZnJvbSAnQHRvbG9rb2Jhbi90Z2QnO1xuXG5leHBvcnQgY2xhc3MgUGFpbnRlclN5bmFwc2VzIGV4dGVuZHMgVGdkUGFpbnRlckdyb3VwIHtcbiAgY29uc3RydWN0b3IoY29udGV4dDogVGdkQ29udGV4dCwgc3luYXBzZXM6IEFycmF5PHsgY29sb3I6IHN0cmluZzsgZGF0YTogRmxvYXQzMkFycmF5IH0+KSB7XG4gICAgc3VwZXIoKTtcbiAgICBmb3IgKGNvbnN0IHsgY29sb3IsIGRhdGE6IGRhdGFQb2ludCB9IG9mIHN5bmFwc2VzKSB7XG4gICAgICBjb25zdCBjbG91ZCA9IG5ldyBUZ2RQYWludGVyUG9pbnRzQ2xvdWQoY29udGV4dCwge1xuICAgICAgICBuYW1lOiBgVGdkUGFpbnRlclBvaW50c0Nsb3VkWyR7Y29sb3J9XWAsXG4gICAgICAgIGRhdGFQb2ludCxcbiAgICAgICAgbWluU2l6ZUluUGl4ZWxzOiA0LFxuICAgICAgICByYWRpdXNNdWx0aXBsaWVyOiA1LFxuICAgICAgICB0ZXh0dXJlOiBuZXcgVGdkVGV4dHVyZTJEKGNvbnRleHQpLmxvYWRCaXRtYXAodGdkQ2FudmFzQ3JlYXRlRmlsbCgxLCAxLCBjb2xvcikpLFxuICAgICAgICBtdXN0RGVsZXRlVGV4dHVyZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hZGQoY2xvdWQpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kZWxldGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICB0eXBlIFRnZENvbnRleHQsXG4gICAgVGdkTGlnaHQsXG4gICAgVGdkTWF0ZXJpYWxEaWZmdXNlLFxuICAgIFRnZFBhaW50ZXJDbGVhcixcbiAgICBUZ2RQYWludGVyR3JvdXAsXG4gICAgVGdkUGFpbnRlclNlZ21lbnRzRGF0YSxcbiAgICBUZ2RQYWludGVyU2VnbWVudHNNb3JwaGluZyxcbiAgICBUZ2RQYWludGVyU3RhdGUsXG4gICAgVGdkVGV4dHVyZTJELFxuICAgIFRnZFZlYzMsXG4gICAgdGdkQ2FudmFzQ3JlYXRlUGFsZXR0ZSxcbiAgICB3ZWJnbFByZXNldERlcHRoLFxufSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuXG5pbXBvcnQgeyBQQUxFVFRFIH0gZnJvbSBcIi4vY29udGFudHNcIlxuaW1wb3J0IHsgUGFpbnRlckhvdmVyIGFzIFBhaW50ZXJIaWdobGlnaHQgfSBmcm9tIFwiLi9oaWdobGlnaHRcIlxuaW1wb3J0IHsgUGFpbnRlclN5bmFwc2VzIH0gZnJvbSBcIi4vc3luYXBzZXNcIlxuaW1wb3J0IHsgTW9ycGhvbG9neURhdGEgfSBmcm9tIFwiLi4vbW9ycGhvbG9neS1kYXRhXCJcblxuZXhwb3J0IGNsYXNzIFBhaW50ZXIgZXh0ZW5kcyBUZ2RQYWludGVyR3JvdXAge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZ3JvdXBTZWdtZW50cyA9IG5ldyBUZ2RQYWludGVyR3JvdXAoKVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBncm91cFN5bmFwc2VzID0gbmV3IFRnZFBhaW50ZXJHcm91cCgpXG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGdyb3VwSG92ZXIgPSBuZXcgVGdkUGFpbnRlckdyb3VwKClcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGFsZXR0ZTogVGdkVGV4dHVyZTJEXG5cbiAgICBwcml2YXRlIF9wYWludGVyU2VnbWVudHM6IFRnZFBhaW50ZXJTZWdtZW50c01vcnBoaW5nIHwgbnVsbCA9IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gYmV0d2VlbiB0d28gdmlld3MuXG4gICAgICogRm9yIGluc3RhbmNlLCAwLjAgZm9yIDNEIGFuZCAxLjAgZm9yIERlbmRyb2dyYW0uXG4gICAgICovXG4gICAgcHJpdmF0ZSBfbWl4ID0gMFxuXG4gICAgcHJpdmF0ZSBfc3luYXBzZXM6IEFycmF5PHsgY29sb3I6IHN0cmluZzsgZGF0YTogRmxvYXQzMkFycmF5IH0+IHwgbnVsbCA9XG4gICAgICAgIG51bGxcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNvbnRleHQ6IFRnZENvbnRleHQsXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZGF0YTogTW9ycGhvbG9neURhdGFcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICB0aGlzLnBhbGV0dGUgPSBuZXcgVGdkVGV4dHVyZTJEKGNvbnRleHQpXG4gICAgICAgICAgICAubG9hZEJpdG1hcCh0Z2RDYW52YXNDcmVhdGVQYWxldHRlKFBBTEVUVEUpKVxuICAgICAgICAgICAgLnNldFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbWFnRmlsdGVyOiBcIk5FQVJFU1RcIixcbiAgICAgICAgICAgICAgICBtaW5GaWx0ZXI6IFwiTkVBUkVTVFwiLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgdGhpcy5hZGQoXG4gICAgICAgICAgICBuZXcgVGdkUGFpbnRlckNsZWFyKGNvbnRleHQsIHsgY29sb3I6IFswLCAwLCAwLCAxXSwgZGVwdGg6IDEgfSksXG4gICAgICAgICAgICBuZXcgVGdkUGFpbnRlclN0YXRlKGNvbnRleHQsIHtcbiAgICAgICAgICAgICAgICBkZXB0aDogd2ViZ2xQcmVzZXREZXB0aC5sZXNzLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBTZWdtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFN5bmFwc2VzLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwSG92ZXIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgeyBkYXRhc2V0M0QsIGRhdGFzZXREZW5kcm9ncmFtIH0gPSBkYXRhXG4gICAgICAgIGNvbnN0IHBhaW50ZXJTZWdtZW50cyA9IG5ldyBUZ2RQYWludGVyU2VnbWVudHNNb3JwaGluZyhjb250ZXh0LCB7XG4gICAgICAgICAgICByb3VuZG5lc3M6IDYsXG4gICAgICAgICAgICBtaW5SYWRpdXM6IDAuNSxcbiAgICAgICAgICAgIGRhdGFzZXRzUGFpcnM6IFtbZGF0YXNldDNELCBkYXRhc2V0RGVuZHJvZ3JhbV1dLFxuICAgICAgICAgICAgbWF0ZXJpYWw6IG5ldyBUZ2RNYXRlcmlhbERpZmZ1c2Uoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLnBhbGV0dGUsXG4gICAgICAgICAgICAgICAgc3BlY3VsYXJFeHBvbmVudDogMSxcbiAgICAgICAgICAgICAgICBzcGVjdWxhckludGVuc2l0eTogMC4yNSxcbiAgICAgICAgICAgICAgICBsb2NrTGlnaHRzVG9DYW1lcmE6IHRydWUsXG4gICAgICAgICAgICAgICAgbGlnaHQ6IG5ldyBUZ2RMaWdodCh7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogbmV3IFRnZFZlYzMoMCwgMCwgLTEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICAgIHBhaW50ZXJTZWdtZW50cy5taXggPSB0aGlzLm1peFxuICAgICAgICB0aGlzLl9wYWludGVyU2VnbWVudHMgPSBwYWludGVyU2VnbWVudHNcbiAgICAgICAgdGhpcy5ncm91cFNlZ21lbnRzLmFkZChwYWludGVyU2VnbWVudHMpXG4gICAgICAgIGNvbnRleHQucGFpbnQoKVxuICAgIH1cblxuICAgIGdldCBtaXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9taXhcbiAgICB9XG5cbiAgICBzZXQgbWl4KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fbWl4ID0gdmFsdWVcbiAgICAgICAgaWYgKHRoaXMuX3BhaW50ZXJTZWdtZW50cykge1xuICAgICAgICAgICAgdGhpcy5fcGFpbnRlclNlZ21lbnRzLm1peCA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgc3luYXBzZXNFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cFN5bmFwc2VzLmFjdGl2ZVxuICAgIH1cblxuICAgIHNldCBzeW5hcHNlc0VuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5ncm91cFN5bmFwc2VzLmFjdGl2ZSA9IHZhbHVlXG4gICAgICAgIHRoaXMuY29udGV4dC5wYWludCgpXG4gICAgfVxuXG4gICAgZ2V0IHN5bmFwc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3luYXBzZXNcbiAgICB9XG5cbiAgICBzZXQgc3luYXBzZXMoXG4gICAgICAgIHN5bmFwc2VzOiBBcnJheTx7IGNvbG9yOiBzdHJpbmc7IGRhdGE6IEZsb2F0MzJBcnJheSB9PiB8IG51bGxcbiAgICApIHtcbiAgICAgICAgdGhpcy5fc3luYXBzZXMgPSBzeW5hcHNlc1xuICAgICAgICBjb25zdCB7IGNvbnRleHQsIGdyb3VwU3luYXBzZXMgfSA9IHRoaXNcbiAgICAgICAgZ3JvdXBTeW5hcHNlcy5kZWxldGUoKVxuICAgICAgICBpZiAoc3luYXBzZXMgJiYgc3luYXBzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ3JvdXBTeW5hcHNlcy5hZGQobmV3IFBhaW50ZXJTeW5hcHNlcyhjb250ZXh0LCBzeW5hcHNlcykpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LnBhaW50KClcbiAgICB9XG5cbiAgICBoaWdobGlnaHQoc2VnbWVudHM6IFRnZFBhaW50ZXJTZWdtZW50c0RhdGEgfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHsgZ3JvdXBIb3ZlciwgY29udGV4dCB9ID0gdGhpc1xuICAgICAgICBncm91cEhvdmVyLmRlbGV0ZSgpXG4gICAgICAgIGlmIChzZWdtZW50cykge1xuICAgICAgICAgICAgZ3JvdXBIb3Zlci5hZGQobmV3IFBhaW50ZXJIaWdobGlnaHQoY29udGV4dCwgc2VnbWVudHMpKVxuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQucGFpbnQoKVxuICAgIH1cblxuICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5wYWxldHRlLmRlbGV0ZSgpXG4gICAgICAgIHRoaXMuZ3JvdXBIb3Zlci5kZWxldGUoKVxuICAgICAgICB0aGlzLmdyb3VwU2VnbWVudHMuZGVsZXRlKClcbiAgICAgICAgdGhpcy5ncm91cFN5bmFwc2VzLmRlbGV0ZSgpXG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICB0Z2RDYWxjTWFwUmFuZ2UsXG4gICAgdGdkQ2FsY01vZHVsbyxcbiAgICBUZ2RDb250ZXh0LFxuICAgIFRnZFBhaW50ZXJMb2dpYyxcbn0gZnJvbSBcIkB0b2xva29iYW4vdGdkXCJcbmltcG9ydCB7IE9mZnNjcmVlblBhaW50ZXIgfSBmcm9tIFwiLi9vZmZzY3JlZW4tcGFpbnRlclwiXG5pbXBvcnQgeyBQYWludGVyIH0gZnJvbSBcIi4vcGFpbnRlcnNcIlxuXG5leHBvcnQgdHlwZSBWaWV3TW9kZSA9IFwiM2RcIiB8IFwiZGVuZHJvZ3JhbVwiXG5cbi8qKlxuICogTWFuYWdlIHRoZSB0cmFuc2l0aW9uIGJldHdlZW4gdmlld3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uTWFuYWdlciB7XG4gICAgcHVibGljIHBhaW50ZXI6IFBhaW50ZXIgfCBudWxsID0gbnVsbFxuXG4gICAgcHVibGljIG9mZnNjcmVlbjogT2Zmc2NyZWVuUGFpbnRlciB8IG51bGwgPSBudWxsXG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ2ljOiBUZ2RQYWludGVyTG9naWNcblxuICAgIHByaXZhdGUgX2NvbnRleHQ6IFRnZENvbnRleHQgfCBudWxsID0gbnVsbFxuXG4gICAgcHJpdmF0ZSBfbW9kZTogVmlld01vZGUgPSBcIjNkXCJcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxvZ2ljID0gbmV3IFRnZFBhaW50ZXJMb2dpYyh0aGlzLmFjdHVhbFBhaW50KVxuICAgIH1cblxuICAgIGdldCBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dFxuICAgIH1cblxuICAgIHNldCBjb250ZXh0KGNvbnRleHQ6IFRnZENvbnRleHQgfCBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb250ZXh0ID09PSBjb250ZXh0KSByZXR1cm5cblxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dFxuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dC5yZW1vdmVBbGwoKVxuICAgICAgICAgICAgY29udGV4dC5hZGQodGhpcy5sb2dpYylcbiAgICAgICAgICAgIGNvbnRleHQucGxheSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21vZGVcbiAgICB9XG5cbiAgICBzZXQgbW9kZShuZXdNb2RlOiBWaWV3TW9kZSkge1xuICAgICAgICBjb25zdCBvbGRNb2RlID0gdGhpcy5fbW9kZVxuICAgICAgICBpZiAob2xkTW9kZSA9PT0gbmV3TW9kZSkgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fbW9kZSA9IG5ld01vZGVcbiAgICB9XG5cbiAgICBwYWludCgpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0Py5wYWludCgpXG4gICAgfVxuXG4gICAgZGVsZXRlKCkge1xuICAgICAgICB0aGlzLnBhaW50ZXI/LmRlbGV0ZSgpXG4gICAgICAgIHRoaXMucGFpbnRlciA9IG51bGxcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRlbGV0ZSgpXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2Zmc2NyZWVuKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNjcmVlbi5kZWxldGUoKVxuICAgICAgICAgICAgdGhpcy5vZmZzY3JlZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGFjdHVhbFBhaW50ID0gKHRpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCB7IHBhaW50ZXIgfSA9IHRoaXNcbiAgICAgICAgaWYgKHBhaW50ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IERVUkFUSU9OID0gOFxuICAgICAgICAgICAgY29uc3QgUEFVU0UgPSAxXG4gICAgICAgICAgICBjb25zdCBzcGFuID0gdGdkQ2FsY01vZHVsbyh0aW1lLCAwLCBEVVJBVElPTiArIFBBVVNFKVxuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSB0Z2RDYWxjTWFwUmFuZ2UoXG4gICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIERVUkFUSU9OLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMiAqIE1hdGguUEksXG4gICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uc3QgbWl4ID0gdGdkQ2FsY01hcFJhbmdlKE1hdGguY29zKGFuZ2xlKSwgLTEsICsxLCAwLCAxKVxuICAgICAgICAgICAgcGFpbnRlci5taXggPSBtaXhcbiAgICAgICAgICAgIHBhaW50ZXIucGFpbnQodGltZSwgZGVsdGEpXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIHR5cGUgQXJyYXlOdW1iZXIyLFxuICAgIEFycmF5TnVtYmVyMyxcbiAgICBUZ2RQYWludGVyU2VnbWVudHNEYXRhLFxufSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuXG5pbXBvcnQgeyB0eXBlIFN0cnVjdHVyZSwgU3RydWN0dXJlSXRlbSwgU3RydWN0dXJlSXRlbVR5cGUgfSBmcm9tIFwiLi9zdHJ1Y3R1cmVcIlxuXG5jb25zdCBISUdITElHSFRfUkFESVVTX01VTFRJUExJRVIgPSAxLjVcblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTZWdtZW50czNEKFxuICAgIHN0cnVjdHVyZTogU3RydWN0dXJlLFxuICAgIG1hcDogTWFwPG51bWJlciwgVGdkUGFpbnRlclNlZ21lbnRzRGF0YT5cbikge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gbmV3IFRnZFBhaW50ZXJTZWdtZW50c0RhdGEoKVxuICAgIHN0cnVjdHVyZS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gaXRlbVxuICAgICAgICBwcm9jZXNzU2VnbWVudChpdGVtLCBzdHJ1Y3R1cmUsIHNlZ21lbnRzLCBzdGFydCwgZW5kLCBtYXApXG4gICAgfSlcbiAgICByZXR1cm4gc2VnbWVudHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTZWdtZW50c0RlbmRyb2dyYW0oXG4gICAgc3RydWN0dXJlOiBTdHJ1Y3R1cmUsXG4gICAgbWFwOiBNYXA8bnVtYmVyLCBUZ2RQYWludGVyU2VnbWVudHNEYXRhPlxuKSB7XG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLmFicyhzdHJ1Y3R1cmUuYmJveC5tYXhbMF0gLSBzdHJ1Y3R1cmUuYmJveC5taW5bMF0pXG4gICAgY29uc3Qgc2VnbWVudHMgPSBuZXcgVGdkUGFpbnRlclNlZ21lbnRzRGF0YSgpXG4gICAgc3RydWN0dXJlLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjb21wdXRlRGVuZHJvZ3JhbVN0YXJ0KGl0ZW0sIHdpZHRoKVxuICAgICAgICBjb25zdCBlbmQgPSBjb21wdXRlRGVuZHJvZ3JhbUVuZChpdGVtLCB3aWR0aClcbiAgICAgICAgcHJvY2Vzc1NlZ21lbnQoaXRlbSwgc3RydWN0dXJlLCBzZWdtZW50cywgc3RhcnQsIGVuZCwgbWFwKVxuICAgIH0pXG4gICAgcmV0dXJuIHNlZ21lbnRzXG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NTZWdtZW50KFxuICAgIGl0ZW06IFN0cnVjdHVyZUl0ZW0sXG4gICAgc3RydWN0dXJlOiBTdHJ1Y3R1cmUsXG4gICAgc2VnbWVudHM6IFRnZFBhaW50ZXJTZWdtZW50c0RhdGEsXG4gICAgc3RhcnQ6IEFycmF5TnVtYmVyMyxcbiAgICBlbmQ6IEFycmF5TnVtYmVyMyxcbiAgICBtYXA6IE1hcDxudW1iZXIsIFRnZFBhaW50ZXJTZWdtZW50c0RhdGE+XG4pIHtcbiAgICBjb25zdCB1djogQXJyYXlOdW1iZXIyID0gW1xuICAgICAgICAoaXRlbS50eXBlICsgMC41KSAvIChTdHJ1Y3R1cmVJdGVtVHlwZS5Vbmtub3duICsgMSksXG4gICAgICAgIChpdGVtLmluZGV4ICsgMS41KSAvIChzdHJ1Y3R1cmUubGVuZ3RoICsgMiksXG4gICAgXVxuICAgIHNlZ21lbnRzLmFkZChbLi4uc3RhcnQsIGl0ZW0ucmFkaXVzXSwgWy4uLmVuZCwgaXRlbS5yYWRpdXNdLCB1diwgdXYpXG4gICAgLyoqXG4gICAgICogU2luZ2xldG9ucyBhcmUgdXNlZCB0byBwYWludCBoaWdobGlnaHRzLlxuICAgICAqL1xuICAgIGNvbnN0IHNpbmdsZXRvbiA9IG5ldyBUZ2RQYWludGVyU2VnbWVudHNEYXRhKClcbiAgICBjb25zdCByYWRpdXMgPSBpdGVtLnJhZGl1cyAqIEhJR0hMSUdIVF9SQURJVVNfTVVMVElQTElFUlxuICAgIHNpbmdsZXRvbi5hZGQoWy4uLnN0YXJ0LCByYWRpdXNdLCBbLi4uZW5kLCByYWRpdXNdLCB1diwgdXYpXG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gU3RydWN0dXJlSXRlbVR5cGUuTGlhaXNvbikge1xuICAgICAgICBtYXAuc2V0KGl0ZW0uaW5kZXgsIHNpbmdsZXRvbilcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEZW5kcm9ncmFtU3RhcnQoXG4gICAgaXRlbTogU3RydWN0dXJlSXRlbSxcbiAgICB3aWR0aDogbnVtYmVyXG4pOiBBcnJheU51bWJlcjMge1xuICAgIGlmIChpdGVtLnR5cGUgPT09IFN0cnVjdHVyZUl0ZW1UeXBlLkxpYWlzb24pIHtcbiAgICAgICAgcmV0dXJuIGNvbXB1dGVEZW5kcm9ncmFtRW5kKGl0ZW0ucGFyZW50ID8/IGl0ZW0sIHdpZHRoKVxuICAgIH1cbiAgICBjb25zdCB4ID0gaXRlbS5yYW5rICogd2lkdGhcbiAgICBjb25zdCB5ID0gaXRlbS5kaXN0YW5jZUZyb21Tb21hXG4gICAgY29uc3QgeiA9IDBcbiAgICByZXR1cm4gW3gsIHksIHpdXG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEZW5kcm9ncmFtRW5kKFxuICAgIGl0ZW06IFN0cnVjdHVyZUl0ZW0sXG4gICAgd2lkdGg6IG51bWJlclxuKTogQXJyYXlOdW1iZXIzIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSBTdHJ1Y3R1cmVJdGVtVHlwZS5MaWFpc29uKSB7XG4gICAgICAgIGNvbnN0IFtjaGlsZF0gPSBpdGVtLmNoaWxkcmVuXG4gICAgICAgIHJldHVybiBjb21wdXRlRGVuZHJvZ3JhbVN0YXJ0KGNoaWxkID8/IGl0ZW0sIHdpZHRoKVxuICAgIH1cbiAgICBjb25zdCB4ID0gaXRlbS5yYW5rICogd2lkdGhcbiAgICBjb25zdCB5ID0gaXRlbS5kaXN0YW5jZUZyb21Tb21hICsgaXRlbS5sZW5ndGhcbiAgICBjb25zdCB6ID0gMFxuICAgIHJldHVybiBbeCwgeSwgel1cbn1cbiIsImltcG9ydCB7IFRnZERhdGFzZXQsIFRnZFBhaW50ZXJTZWdtZW50c0RhdGEgfSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuaW1wb3J0IHsgTW9ycGhvbG9neSB9IGZyb20gXCIuLi90eXBlc1wiXG5pbXBvcnQgeyBTdHJ1Y3R1cmUgfSBmcm9tIFwiLi9zdHJ1Y3R1cmVcIlxuaW1wb3J0IHsgbWFrZVNlZ21lbnRzM0QsIG1ha2VTZWdtZW50c0RlbmRyb2dyYW0gfSBmcm9tIFwiLi9zZWdtZW50c1wiXG5cbmV4cG9ydCBjbGFzcyBNb3JwaG9sb2d5RGF0YSB7XG4gICAgcHVibGljIHJlYWRvbmx5IHN0cnVjdHVyZTogU3RydWN0dXJlXG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgZGF0YXNldDNEOiBUZ2REYXRhc2V0XG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgc2VnbWVudHMzRCA9IG5ldyBNYXA8bnVtYmVyLCBUZ2RQYWludGVyU2VnbWVudHNEYXRhPigpXG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgZGF0YXNldERlbmRyb2dyYW06IFRnZERhdGFzZXRcblxuICAgIHB1YmxpYyByZWFkb25seSBzZWdtZW50c0RlbmRyb2dyYW0gPSBuZXcgTWFwPFxuICAgICAgICBudW1iZXIsXG4gICAgICAgIFRnZFBhaW50ZXJTZWdtZW50c0RhdGFcbiAgICA+KClcblxuICAgIGNvbnN0cnVjdG9yKG1vcnBob2xvZ3k6IE1vcnBob2xvZ3kpIHtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmUgPSBuZXcgU3RydWN0dXJlKG1vcnBob2xvZ3kpXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzM0QgPSBtYWtlU2VnbWVudHMzRCh0aGlzLnN0cnVjdHVyZSwgdGhpcy5zZWdtZW50czNEKVxuICAgICAgICB0aGlzLmRhdGFzZXQzRCA9IHNlZ21lbnRzM0QubWFrZURhdGFzZXQoKVxuICAgICAgICBjb25zdCBzZWdtZW50c0RlbmRyb2dyYW0gPSBtYWtlU2VnbWVudHNEZW5kcm9ncmFtKFxuICAgICAgICAgICAgdGhpcy5zdHJ1Y3R1cmUsXG4gICAgICAgICAgICB0aGlzLnNlZ21lbnRzRGVuZHJvZ3JhbVxuICAgICAgICApXG4gICAgICAgIHRoaXMuZGF0YXNldERlbmRyb2dyYW0gPSBzZWdtZW50c0RlbmRyb2dyYW0ubWFrZURhdGFzZXQoKVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE1vcnBob2xvZ3kgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgTW9ycGhvbG9neURhdGEgfSBmcm9tIFwiLi9tb3JwaG9sb2d5LWRhdGFcIlxuXG4vKipcbiAqIFRvIGJlIGFibGUgdG8gaW5pdGlhbGl6ZSB0aGUgdmlld2VyLCB3ZSBuZWVkIGEgYGNhbnZhc2BcbiAqIGFuZCBhIGBtb3JwaG9sb2d5YC4gQnV0IHdlIGRvbid0IGtub3cgd2hlbiB3ZSB3aWxsIHJlY2VpdmVcbiAqIHRoZW0sIG5vciBpbiB3aGF0IG9yZGVyLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSW5pdGlhbGl6ZXIge1xuICAgIC8vI3JlZ2lvbiBjYW52YXNcbiAgICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbCA9IG51bGxcblxuICAgIGdldCBjYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW52YXNcbiAgICB9XG4gICAgc2V0IGNhbnZhcyh2YWx1ZTogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYW52YXMgPT09IHZhbHVlKSByZXR1cm5cblxuICAgICAgICB0aGlzLl9jYW52YXMgPSB2YWx1ZVxuICAgICAgICBpZiAoIXZhbHVlKSB0aGlzLmRlbGV0ZSgpXG4gICAgICAgIGVsc2UgdGhpcy5pbml0aWFsaXplV2hlblJlYWR5KClcbiAgICB9XG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICAvLyNyZWdpb24gbW9ycGhvbG9neVxuICAgIHByaXZhdGUgX21vcnBob2xvZ3k6IE1vcnBob2xvZ3kgfCBudWxsID0gbnVsbFxuXG4gICAgZ2V0IG1vcnBob2xvZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tb3JwaG9sb2d5XG4gICAgfVxuICAgIHNldCBtb3JwaG9sb2d5KHZhbHVlOiBNb3JwaG9sb2d5IHwgbnVsbCkge1xuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5fbW9ycGhvbG9neSkgPT09IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fbW9ycGhvbG9neSA9IHZhbHVlXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVdoZW5SZWFkeSgpXG4gICAgfVxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplV2hlblJlYWR5KCkge1xuICAgICAgICBjb25zdCB7IGNhbnZhcywgbW9ycGhvbG9neSB9ID0gdGhpc1xuICAgICAgICBpZiAoY2FudmFzICYmIG1vcnBob2xvZ3kpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZShjYW52YXMsIG5ldyBNb3JwaG9sb2d5RGF0YShtb3JwaG9sb2d5KSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBpbml0aWFsaXplKFxuICAgICAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LFxuICAgICAgICBkYXRhOiBNb3JwaG9sb2d5RGF0YVxuICAgICk6IHZvaWRcblxuICAgIGFic3RyYWN0IGRlbGV0ZSgpOiB2b2lkXG59XG4iLCJcInVzZSBjbGllbnRcIlxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cblxuaW1wb3J0IHtcbiAgICB0eXBlIFRnZENhbWVyYVN0YXRlLFxuICAgIFRnZENvbnRleHQsXG4gICAgVGdkQ29udHJvbGxlckNhbWVyYU9yYml0LFxuICAgIFRnZEV2ZW50LFxuICAgIFRnZE1hdDQsXG4gICAgVGdkUGFpbnRlclNlZ21lbnRzRGF0YSxcbiAgICBUZ2RWZWMzLFxuICAgIHRnZENhbGNNYXBSYW5nZSxcbn0gZnJvbSBcIkB0b2xva29iYW4vdGdkXCJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHR5cGUgeyBNb3JwaG9sb2d5IH0gZnJvbSBcIi4uL3R5cGVzXCJcbmltcG9ydCB7IG1ha2VDYW1lcmEgfSBmcm9tIFwiLi9jYW1lcmFcIlxuaW1wb3J0IHsgY29tcHV0ZVNlY3Rpb25PZmZzZXQgfSBmcm9tIFwiLi9tYXRoXCJcbmltcG9ydCB7IE9mZnNjcmVlblBhaW50ZXIgfSBmcm9tIFwiLi9vZmZzY3JlZW4tcGFpbnRlclwiXG5pbXBvcnQgeyBQYWludGVyIH0gZnJvbSBcIi4vcGFpbnRlcnNcIlxuaW1wb3J0IHsgdHlwZSBTdHJ1Y3R1cmVJdGVtIH0gZnJvbSBcIi4vc3RydWN0dXJlXCJcbmltcG9ydCB7IE1vcnBob2xvZ3lEYXRhIH0gZnJvbSBcIi4vbW9ycGhvbG9neS1kYXRhXCJcbmltcG9ydCB7IFRyYW5zaXRpb25NYW5hZ2VyLCBWaWV3TW9kZSB9IGZyb20gXCIuL3RyYW5zaXRpb25cIlxuaW1wb3J0IHsgSW5pdGlhbGl6ZXIgfSBmcm9tIFwiLi9pbml0aWFsaXplclwiXG5cbmludGVyZmFjZSBTZWxlY3RlZEl0ZW0ge1xuICAgIHg6IG51bWJlclxuICAgIHk6IG51bWJlclxuICAgIGl0ZW06IFN0cnVjdHVyZUl0ZW0gfCBudWxsXG4gICAgb2Zmc2V0OiBudW1iZXJcbn1cblxuY29uc3QgRU1QVFlfU0VHTUVOVFM6IFJlYWRvbmx5PE1hcDxudW1iZXIsIFRnZFBhaW50ZXJTZWdtZW50c0RhdGE+PiA9IG5ldyBNYXA8XG4gICAgbnVtYmVyLFxuICAgIFRnZFBhaW50ZXJTZWdtZW50c0RhdGFcbj4oKVxuXG5leHBvcnQgY2xhc3MgUGFpbnRlck1hbmFnZXIgZXh0ZW5kcyBJbml0aWFsaXplciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaWQgPSAwXG5cbiAgICBwdWJsaWMgZGlzYWJsZUVsZWN0cm9kZXMgPSBmYWxzZVxuXG4gICAgcHVibGljIHJlYWRvbmx5IGlkID0gUGFpbnRlck1hbmFnZXIuaWQrK1xuXG4gICAgcHVibGljIHJlYWRvbmx5IGV2ZW50RXJyb3IgPSBuZXcgVGdkRXZlbnQ8c3RyaW5nPigpXG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgZXZlbnRQYWludCA9IG5ldyBUZ2RFdmVudDx2b2lkPigpXG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgZXZlbnRIb3ZlciA9IG5ldyBUZ2RFdmVudDxTZWxlY3RlZEl0ZW0+KClcblxuICAgIHB1YmxpYyByZWFkb25seSBldmVudFRhcCA9IG5ldyBUZ2RFdmVudDx7XG4gICAgICAgIHg6IG51bWJlclxuICAgICAgICB5OiBudW1iZXJcbiAgICAgICAgaXRlbTogU3RydWN0dXJlSXRlbSB8IG51bGxcbiAgICAgICAgb2Zmc2V0OiBudW1iZXJcbiAgICB9PigpXG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBmb3Igbm9ybWFsaXplZCB6b29tIGNoYW5nZXMuXG4gICAgICogVGhlIHZhbHVlIGlzIGJldHdlZW4gYC0xLjBgIGFuZCBgKzEuMGBcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgZXZlbnRab29tID0gbmV3IFRnZEV2ZW50PG51bWJlcj4oKVxuXG4gICAgcHVibGljIHJlYWRvbmx5IGV2ZW50UmVzdGluZ1Bvc2l0aW9uID0gbmV3IFRnZEV2ZW50PGJvb2xlYW4+KClcblxuICAgIHB1YmxpYyByZWFkb25seSBldmVudEhpbnRWaXNpYmxlID0gbmV3IFRnZEV2ZW50PGJvb2xlYW4+KClcblxuICAgIHB1YmxpYyByZWFkb25seSBldmVudEZvcmJpZGRlbkNsaWNrID0gbmV3IFRnZEV2ZW50PHZvaWQ+KClcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmlldyA9IG5ldyBUcmFuc2l0aW9uTWFuYWdlcigpXG5cbiAgICBwcml2YXRlIF9kaXNhYmxlU3luYXBzZXMgPSBmYWxzZVxuXG4gICAgcHJpdmF0ZSBfaG92ZXJJdGVtOiBTZWxlY3RlZEl0ZW0gPSB7IHg6IDAsIHk6IDAsIG9mZnNldDogMCwgaXRlbTogbnVsbCB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGluaXRpYWxQb3NpdGlvbiA9IG5ldyBUZ2RWZWMzKClcblxuICAgIHByaXZhdGUgY2FtZXJhQ29udHJvbGxlcjogVGdkQ29udHJvbGxlckNhbWVyYU9yYml0IHwgbnVsbCA9IG51bGxcblxuICAgIHByaXZhdGUgc3luYXBzZXM6IEFycmF5PHsgY29sb3I6IHN0cmluZzsgZGF0YTogRmxvYXQzMkFycmF5IH0+ID0gW11cblxuICAgIHByaXZhdGUgZGF0YTogTW9ycGhvbG9neURhdGEgfCBudWxsID0gbnVsbFxuXG4gICAgLyoqXG4gICAgICogV2hlbiBpcyB0aGUgbGFzdCB0aW1lIHRoZSBjYW1lcmEgbW92ZWQ/XG4gICAgICogV2UgdXNlIHRoaXMgdG8gcHJldmVudCBhIHF1aWNrIGNhbWVyYSBtb3ZlZFxuICAgICAqIGZyb20gYmVpbmcgaW50ZXJwcmV0ZWQgYXMgYSBjbGljay5cbiAgICAgKiBCZWNhdXNlIGEgY2xpY2sgd2lsbCBicmluZyBhIG1vZGFsIHdpbmRvdyB0byBhZGRcbiAgICAgKiByZWNvcmRpbmcuXG4gICAgICovXG4gICAgcHJpdmF0ZSBsYXN0Q2FtZXJhQ2hhbmdlVGltZXN0YW1wID0gMFxuXG4gICAgLyoqXG4gICAgICogUmVtZW1iZXIgdGhlIGNhbWVyYSBwb3NpdGlvbiwgc28gaWYgd2UgaW5pdGlhbGl6ZSB3aXRoIHRoZVxuICAgICAqIHNhbWUgbW9ycGhvbG9neSwgd2UgY2FuIHJlc3RvcmUgY2FtZXJhIHN0YXRlLlxuICAgICAqL1xuICAgIHByaXZhdGUgbGFzdENhbWVyYVN0YXRlOiBUZ2RDYW1lcmFTdGF0ZSB8IG51bGwgPSBudWxsXG5cbiAgICBwcml2YXRlIF9jbGlja2FibGUgPSB0cnVlXG5cbiAgICBnZXQgbW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5tb2RlXG4gICAgfVxuXG4gICAgc2V0IG1vZGUodmFsdWU6IFZpZXdNb2RlKSB7XG4gICAgICAgIHRoaXMudmlldy5tb2RlID0gdmFsdWVcbiAgICB9XG5cbiAgICBnZXQgZGlzYWJsZVN5bmFwc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZVN5bmFwc2VzXG4gICAgfVxuXG4gICAgc2V0IGRpc2FibGVTeW5hcHNlcyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9kaXNhYmxlU3luYXBzZXMgPSB2YWx1ZVxuICAgICAgICBjb25zdCB7IHBhaW50ZXIgfSA9IHRoaXMudmlld1xuICAgICAgICBpZiAocGFpbnRlcikgcGFpbnRlci5zeW5hcHNlc0VuYWJsZWQgPSAhdmFsdWVcbiAgICB9XG5cbiAgICBnZXQgY2xpY2thYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xpY2thYmxlXG4gICAgfVxuXG4gICAgc2V0IGNsaWNrYWJsZSh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9jbGlja2FibGUgPSB2YWx1ZVxuICAgICAgICB0aGlzLnZpZXcuY29udGV4dD8ucGFpbnQoKVxuICAgIH1cblxuICAgIGdldCBob3Zlckl0ZW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ob3Zlckl0ZW1cbiAgICB9XG5cbiAgICBzZXQgaG92ZXJJdGVtKHZhbHVlOiBTZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgdGhpcy5faG92ZXJJdGVtID0gdmFsdWVcbiAgICAgICAgdGhpcy5ldmVudEhvdmVyLmRpc3BhdGNoKHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbm9ybWFsaXplZCB6b29tIGlzIGJldHdlZW4gLTEgYW5kICsxLlxuICAgICAqL1xuICAgIGdldCB6b29tKCkge1xuICAgICAgICBjb25zdCB7IHZpZXcsIGNhbWVyYUNvbnRyb2xsZXIgfSA9IHRoaXNcbiAgICAgICAgY29uc3QgeyBjb250ZXh0IH0gPSB2aWV3XG4gICAgICAgIGlmICghY29udGV4dCB8fCAhY2FtZXJhQ29udHJvbGxlcikgcmV0dXJuIDBcblxuICAgICAgICByZXR1cm4gdGhpcy50b05vcm1hbGl6ZWRab29tKGNhbWVyYUNvbnRyb2xsZXIuem9vbSlcbiAgICB9XG5cbiAgICBzZXQgem9vbSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHsgY2FtZXJhQ29udHJvbGxlciB9ID0gdGhpc1xuICAgICAgICBpZiAoIWNhbWVyYUNvbnRyb2xsZXIpIHJldHVyblxuXG4gICAgICAgIGlmIChNYXRoLmFicyh2YWx1ZSAtIHRoaXMuem9vbSkgPCAxZS02KSByZXR1cm5cblxuICAgICAgICBpZiAodmFsdWUgIT09IDApIHRoaXMuZXZlbnRSZXN0aW5nUG9zaXRpb24uZGlzcGF0Y2goZmFsc2UpXG4gICAgICAgIGNvbnN0IHpvb20gPSB0aGlzLnRvQ29udHJvbGxlclpvb20odmFsdWUpXG4gICAgICAgIGNhbWVyYUNvbnRyb2xsZXIuem9vbSA9IHpvb21cbiAgICAgICAgdGhpcy5ldmVudFpvb20uZGlzcGF0Y2godmFsdWUpXG4gICAgICAgIHRoaXMudmlldy5wYWludCgpXG4gICAgfVxuXG4gICAgcmVhZG9ubHkgem9vbU91dCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy56b29tIC09IDAuMVxuICAgIH1cblxuICAgIHJlYWRvbmx5IHpvb21JbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy56b29tICs9IDAuMVxuICAgIH1cblxuICAgIGdldENhbWVyYU1hdHJpeCgpOiBSZWFkb25seTxUZ2RNYXQ0PiB7XG4gICAgICAgIGNvbnN0IHsgY29udGV4dCB9ID0gdGhpcy52aWV3XG4gICAgICAgIGlmICghY29udGV4dCkgcmV0dXJuIG5ldyBUZ2RNYXQ0KClcblxuICAgICAgICBjb25zdCB7IGNhbWVyYSB9ID0gY29udGV4dFxuICAgICAgICByZXR1cm4gbmV3IFRnZE1hdDQoY2FtZXJhLm1hdHJpeFByb2plY3Rpb24pLm11bHRpcGx5KFxuICAgICAgICAgICAgY2FtZXJhLm1hdHJpeE1vZGVsVmlld1xuICAgICAgICApXG4gICAgfVxuXG4gICAgcmVhZG9ubHkgcmVzZXRDYW1lcmEgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdmlldywgY2FtZXJhQ29udHJvbGxlciB9ID0gdGhpc1xuICAgICAgICBjb25zdCB7IGNvbnRleHQgfSA9IHZpZXdcbiAgICAgICAgaWYgKCFjb250ZXh0IHx8ICFjYW1lcmFDb250cm9sbGVyKSByZXR1cm5cblxuICAgICAgICBjb25zdCB7IHpvb20gfSA9IHRoaXNcbiAgICAgICAgY2FtZXJhQ29udHJvbGxlci5yZXNldCgwLjMzMzMsIHtcbiAgICAgICAgICAgIG9uQWN0aW9uOiAodDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFpvb20uZGlzcGF0Y2godGdkQ2FsY01hcFJhbmdlKHQsIDAsIDEsIHpvb20sIDApKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRW5kOiAoKSA9PiB0aGlzLmV2ZW50UmVzdGluZ1Bvc2l0aW9uLmRpc3BhdGNoKHRydWUpLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgdGhpcy52aWV3LmRlbGV0ZSgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2UgbG9vayBmb3IgdGhlIHNlZ21lbnQgZGVmaW5lZCBieSBgb2Zmc2V0YCBhbmRcbiAgICAgKiB3ZSByZXR1cm4gdGhlIDNEIHBvaW50IGluIGl0LlxuICAgICAqIEBwYXJhbSBzZWN0aW9uTmFtZVxuICAgICAqIEBwYXJhbSBvZmZzZXRcbiAgICAgKi9cbiAgICBnZXRTZWN0aW9uQ29vcmRpbmF0ZXMoc2VjdGlvbk5hbWU6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIpOiBUZ2RWZWMzIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gdGhpcy5kYXRhPy5zdHJ1Y3R1cmVcbiAgICAgICAgaWYgKCFzdHJ1Y3R1cmUpIHJldHVybiBuZXcgVGdkVmVjMygpXG5cbiAgICAgICAgY29uc3Qgc2VnbWVudHMgPSBzdHJ1Y3R1cmUuZ2V0U2VnbWVudHNPZlNlY3Rpb24oc2VjdGlvbk5hbWUpID8/IFtdXG4gICAgICAgIGNvbnN0IHRvdGFsRGlzdGFuY2UgPSBzZWdtZW50cy5yZWR1Y2UoXG4gICAgICAgICAgICAoZGlzdCwgaXRlbSkgPT4gZGlzdCArIGl0ZW0ubGVuZ3RoLFxuICAgICAgICAgICAgMFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHRhcmdldERpc3RhbmNlID0gdG90YWxEaXN0YW5jZSAqIG9mZnNldFxuICAgICAgICBsZXQgZGlzdGFuY2UgPSAwXG4gICAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEaXN0YW5jZSA9IGRpc3RhbmNlXG4gICAgICAgICAgICBkaXN0YW5jZSArPSBzZWdtZW50Lmxlbmd0aFxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID49IHRhcmdldERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudE9mZnNldCA9XG4gICAgICAgICAgICAgICAgICAgICh0YXJnZXREaXN0YW5jZSAtIHByZXZpb3VzRGlzdGFuY2UpIC8gc2VnbWVudC5sZW5ndGhcbiAgICAgICAgICAgICAgICBjb25zdCBwb2ludCA9IFRnZFZlYzMubmV3RnJvbU1peChcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudC5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudC5lbmQsXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRPZmZzZXRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUZ2RWZWMzKClcbiAgICB9XG5cbiAgICBnZXRTZWdtZW50KFxuICAgICAgICBzZWN0aW9uTmFtZTogc3RyaW5nLFxuICAgICAgICBzZWN0aW9uT2Zmc2V0OiBudW1iZXJcbiAgICApOiBTdHJ1Y3R1cmVJdGVtIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZSA9IHRoaXMuZGF0YT8uc3RydWN0dXJlXG4gICAgICAgIGlmICghc3RydWN0dXJlKSByZXR1cm4gbnVsbFxuXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gc3RydWN0dXJlLmdldFNlZ21lbnRzT2ZTZWN0aW9uKHNlY3Rpb25OYW1lKVxuICAgICAgICBpZiAoIXNlZ21lbnRzKSByZXR1cm4gbnVsbFxuXG4gICAgICAgIGNvbnN0IHRvdGFsRGlzdGFuY2UgPSBzZWdtZW50cy5yZWR1Y2UoXG4gICAgICAgICAgICAoZGlzdCwgaXRlbSkgPT4gZGlzdCArIGl0ZW0ubGVuZ3RoLFxuICAgICAgICAgICAgMFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHRhcmdldERpc3RhbmNlID0gdG90YWxEaXN0YW5jZSAqIHNlY3Rpb25PZmZzZXRcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gMFxuICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgICAgICAgIGRpc3RhbmNlICs9IHNlZ21lbnQubGVuZ3RoXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPj0gdGFyZ2V0RGlzdGFuY2UpIHJldHVybiBzZWdtZW50XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBzaG93U3luYXBzZXMoc3luYXBzZXM6IEFycmF5PHsgY29sb3I6IHN0cmluZzsgZGF0YTogRmxvYXQzMkFycmF5IH0+KSB7XG4gICAgICAgIHRoaXMuc3luYXBzZXMgPSBzeW5hcHNlc1xuICAgICAgICBjb25zdCB7IGNvbnRleHQsIHBhaW50ZXIgfSA9IHRoaXMudmlld1xuICAgICAgICBpZiAoIWNvbnRleHQgfHwgIXBhaW50ZXIpIHJldHVyblxuXG4gICAgICAgIHBhaW50ZXIuc3luYXBzZXMgPSBzeW5hcHNlc1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbml0aWFsaXplKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGRhdGE6IE1vcnBob2xvZ3lEYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuaW5pdENvbnRleHQoY2FudmFzLCBkYXRhKVxuICAgICAgICB0aGlzLmluaXRQYWludGVyKGNvbnRleHQsIGRhdGEpXG4gICAgICAgIGNvbnRleHQuZXZlbnRQYWludC5hZGRMaXN0ZW5lcih0aGlzLmhhbmRsZVBhaW50KVxuICAgICAgICB0aGlzLmluaXRPZmZzY3JlZW4oY29udGV4dCwgZGF0YSlcbiAgICAgICAgdGhpcy5ldmVudEhpbnRWaXNpYmxlLmRpc3BhdGNoKGZhbHNlKVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdENvbnRleHQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZGF0YTogTW9ycGhvbG9neURhdGEpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBUZ2RDb250ZXh0KGNhbnZhcywge1xuICAgICAgICAgICAgYWxwaGE6IGZhbHNlLFxuICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICBjb250ZXh0LmV2ZW50V2ViR0xDb250ZXh0UmVzdG9yZWQuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUoKVxuICAgICAgICAgICAgZ2xvYmFsVGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoY2FudmFzLCBkYXRhKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnZpZXcuY29udGV4dCA9IGNvbnRleHRcbiAgICAgICAgY29uc3QgeyBjYW1lcmEsIHpvb21NaW4sIHpvb21NYXggfSA9IG1ha2VDYW1lcmEoZGF0YS5zdHJ1Y3R1cmUpXG4gICAgICAgIGNvbnRleHQuY2FtZXJhID0gY2FtZXJhXG4gICAgICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9uLmZyb20oY29udGV4dC5jYW1lcmEudHJhbnNmby5wb3NpdGlvbilcbiAgICAgICAgdGhpcy5pbml0Q2FtZXJhQ29udHJvbGxlcihjb250ZXh0LCB6b29tTWluLCB6b29tTWF4KVxuICAgICAgICBpZiAodGhpcy5sYXN0Q2FtZXJhU3RhdGUpIHtcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgY2FtZXJhIHN0YXRlXG4gICAgICAgICAgICBjb250ZXh0LmNhbWVyYS5zZXRDdXJyZW50U3RhdGUodGhpcy5sYXN0Q2FtZXJhU3RhdGUpXG4gICAgICAgICAgICB0aGlzLmV2ZW50UmVzdGluZ1Bvc2l0aW9uLmRpc3BhdGNoKGZhbHNlKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0UGFpbnRlcihjb250ZXh0OiBUZ2RDb250ZXh0LCBkYXRhOiBNb3JwaG9sb2d5RGF0YSkge1xuICAgICAgICBjb25zdCBwYWludGVyID0gbmV3IFBhaW50ZXIoY29udGV4dCwgZGF0YSlcbiAgICAgICAgdGhpcy52aWV3LnBhaW50ZXIgPSBwYWludGVyXG4gICAgICAgIHBhaW50ZXIuc3luYXBzZXMgPSB0aGlzLnN5bmFwc2VzXG4gICAgICAgIHRoaXMudmlldy5wYWludGVyID0gcGFpbnRlclxuICAgICAgICByZXR1cm4gcGFpbnRlclxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdlIHBhaW50IGEgdGhpY2tlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgbmV1cm9uIGluIGFuIG9mZnNjZWVuIGNhbnZhcy5cbiAgICAgKiBUaGUgY29sb3Igb2YgZWFjaCBzZWdtZW50IGlzIHRoZSBJRCBvZiB0aGlzIHNlZ21lbnQuIFNvIHdlIG11c3QgTk9UXG4gICAgICogdXNlIGFudGktYWxpYXNpbmcsIG9yIGFueSBzaGFkaW5nIChvdGhlciB0aGFuIGZsYXQpLlxuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdE9mZnNjcmVlbihjb250ZXh0OiBUZ2RDb250ZXh0LCBkYXRhOiBNb3JwaG9sb2d5RGF0YSkge1xuICAgICAgICBjb25zdCB7IHZpZXcgfSA9IHRoaXNcbiAgICAgICAgdmlldy5vZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuUGFpbnRlcihjb250ZXh0KVxuICAgICAgICB2aWV3Lm9mZnNjcmVlbi5kYXRhID0gZGF0YVxuICAgICAgICBjb250ZXh0LmlucHV0cy5wb2ludGVyLmV2ZW50SG92ZXIuYWRkTGlzdGVuZXIoKGV2dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzXG4gICAgICAgICAgICBjb25zdCB7IHBhaW50ZXIgfSA9IHZpZXdcbiAgICAgICAgICAgIGlmICghcGFpbnRlciB8fCAhZGF0YSkgcmV0dXJuXG5cbiAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZXZ0LmN1cnJlbnRcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB2aWV3Lm9mZnNjcmVlbj8uZ2V0SXRlbUF0KHgsIHkpID8/IG51bGxcbiAgICAgICAgICAgIGlmIChpdGVtICE9PSB0aGlzLmhvdmVySXRlbS5pdGVtKSB7XG4gICAgICAgICAgICAgICAgcGFpbnRlci5oaWdobGlnaHQobnVsbClcbiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMFxuICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cy5nZXQoaXRlbS5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgcGFpbnRlci5oaWdobGlnaHQoc2VnbWVudHMpXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGNvbXB1dGVTZWN0aW9uT2Zmc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zdHJ1Y3R1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jYW1lcmEsXG4gICAgICAgICAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgICAgICAgICAgeVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpbnRlci5oaWdobGlnaHQobnVsbClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5ob3Zlckl0ZW0gPSB7IHgsIHksIG9mZnNldCwgaXRlbTogaXRlbSA/PyBudWxsIH1cbiAgICAgICAgICAgICAgICB2aWV3LnBhaW50KClcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SGludFZpc2libGUuZGlzcGF0Y2godHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgY29udGV4dC5pbnB1dHMucG9pbnRlci5ldmVudFRhcC5hZGRMaXN0ZW5lcigoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlRWxlY3Ryb2RlcykgcmV0dXJuXG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jbGlja2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50Rm9yYmlkZGVuQ2xpY2suZGlzcGF0Y2goKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGNhbWVyYSBtb3ZlbWVudCB0byBiZSBpbnRlcnByZXRlZCBhcyBhIGNsaWNrLlxuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RDYW1lcmFDaGFuZ2VUaW1lc3RhbXAgPCAzMDApIHJldHVyblxuXG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHZpZXcgfSA9IHRoaXNcbiAgICAgICAgICAgIGlmICghdmlldy5jb250ZXh0IHx8ICFkYXRhKSByZXR1cm5cblxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBldnRcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB2aWV3Lm9mZnNjcmVlbj8uZ2V0SXRlbUF0KHgsIHkpID8/IG51bGxcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IGNvbXB1dGVTZWN0aW9uT2Zmc2V0KFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN0cnVjdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jb250ZXh0LmNhbWVyYSxcbiAgICAgICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICAgICAgeVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVySXRlbSA9IHsgeCwgeSwgb2Zmc2V0OiBzZWdtZW50LCBpdGVtOiBpdGVtID8/IG51bGwgfVxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRUYXAuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiB0aGlzLmhvdmVySXRlbS5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IHNlZ21lbnQsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SGludFZpc2libGUuZGlzcGF0Y2goZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0Q2FtZXJhQ29udHJvbGxlcihcbiAgICAgICAgY29udGV4dDogVGdkQ29udGV4dCxcbiAgICAgICAgbWluWm9vbTogbnVtYmVyLFxuICAgICAgICBtYXhab29tOiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuY2FtZXJhQ29udHJvbGxlcikgdGhpcy5jYW1lcmFDb250cm9sbGVyLmRldGFjaCgpXG4gICAgICAgIGNvbnN0IGNhbWVyYUNvbnRyb2xsZXIgPSBuZXcgVGdkQ29udHJvbGxlckNhbWVyYU9yYml0KGNvbnRleHQsIHtcbiAgICAgICAgICAgIGluZXJ0aWFPcmJpdDogNTAwLFxuICAgICAgICAgICAgaW5lcnRpYVpvb206IDI1MCxcbiAgICAgICAgICAgIG1pblpvb20sXG4gICAgICAgICAgICBtYXhab29tLFxuICAgICAgICAgICAgc3BlZWRab29tOiAxLFxuICAgICAgICAgICAgb25ab29tUmVxdWVzdDogKHsgem9vbSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFpvb20uZGlzcGF0Y2godGhpcy50b05vcm1hbGl6ZWRab29tKHpvb20pKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmNhbWVyYUNvbnRyb2xsZXIgPSBjYW1lcmFDb250cm9sbGVyXG4gICAgICAgIGNhbWVyYUNvbnRyb2xsZXIuZXZlbnRDaGFuZ2UuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVtZW1iZXIgbGFzdCBjYW1lcmEgbW92ZW1lbnQgdG8gcHJldmVudCBmYWxzZSBjbGlja3MuXG4gICAgICAgICAgICB0aGlzLmxhc3RDYW1lcmFDaGFuZ2VUaW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgICAgICAgICB0aGlzLmV2ZW50UmVzdGluZ1Bvc2l0aW9uLmRpc3BhdGNoKGZhbHNlKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHNlZ21lbnRzKCkge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXNcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gRU1QVFlfU0VHTUVOVFNcblxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBcIjNkXCIpIHJldHVybiBkYXRhLnNlZ21lbnRzM0RcbiAgICAgICAgZWxzZSByZXR1cm4gZGF0YS5zZWdtZW50c0RlbmRyb2dyYW1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGhhbmRsZVBhaW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbnRleHQgfSA9IHRoaXMudmlld1xuICAgICAgICBpZiAoIWNvbnRleHQpIHJldHVyblxuXG4gICAgICAgIHRoaXMubGFzdENhbWVyYVN0YXRlID0gY29udGV4dC5jYW1lcmEuZ2V0Q3VycmVudFN0YXRlKClcbiAgICAgICAgdGhpcy5ldmVudFBhaW50LmRpc3BhdGNoKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY29udHJvbGxlclpvb20gQmV0d2VlbiBgdGhpcy5jb250cm9sbGVyLm1pblpvb21gIGFuZCBgdGhpcy5jb250cm9sbGVyLm1heFpvb21gLlxuICAgICAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHpvb20gYmV0d2VlbiAtMSBhbmQgKzEuXG4gICAgICovXG4gICAgcHJpdmF0ZSB0b05vcm1hbGl6ZWRab29tKGNvbnRyb2xsZXJab29tOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgeyBjYW1lcmFDb250cm9sbGVyIH0gPSB0aGlzXG4gICAgICAgIGlmICghY2FtZXJhQ29udHJvbGxlcikgcmV0dXJuIDBcblxuICAgICAgICBjb25zdCB7IG1pblpvb20sIG1heFpvb20gfSA9IGNhbWVyYUNvbnRyb2xsZXJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJab29tIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRnZENhbGNNYXBSYW5nZShjb250cm9sbGVyWm9vbSwgMSwgbWluWm9vbSwgMCwgLTEsIHRydWUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRnZENhbGNNYXBSYW5nZShjb250cm9sbGVyWm9vbSwgMSwgbWF4Wm9vbSwgMCwgKzEsIHRydWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5vcm1hbGl6ZWRab29tIEJldHdlZW4gLTEgYW5kICsxLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb250cm9sbGVyIHpvb20gYmV0d2VlbiBgdGhpcy5jb250cm9sbGVyLm1pblpvb21gIGFuZCBgdGhpcy5jb250cm9sbGVyLm1heFpvb21gLlxuICAgICAqL1xuICAgIHByaXZhdGUgdG9Db250cm9sbGVyWm9vbShub3JtYWxpemVkWm9vbTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHsgY2FtZXJhQ29udHJvbGxlciB9ID0gdGhpc1xuICAgICAgICBpZiAoIWNhbWVyYUNvbnRyb2xsZXIpIHJldHVybiAxXG5cbiAgICAgICAgY29uc3QgeyBtaW5ab29tLCBtYXhab29tIH0gPSBjYW1lcmFDb250cm9sbGVyXG4gICAgICAgIGlmIChub3JtYWxpemVkWm9vbSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0Z2RDYWxjTWFwUmFuZ2Uobm9ybWFsaXplZFpvb20sIDAsIC0xLCAxLCBtaW5ab29tLCB0cnVlKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Z2RDYWxjTWFwUmFuZ2Uobm9ybWFsaXplZFpvb20sIDAsICsxLCAxLCBtYXhab29tLCB0cnVlKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhaW50ZXJNYW5hZ2VyKG1vcnBob2xvZ3k6IE1vcnBob2xvZ3kgfCBudWxsKSB7XG4gICAgY29uc3QgcmVmUGFpbnRlciA9IFJlYWN0LnVzZVJlZjxQYWludGVyTWFuYWdlciB8IG51bGw+KG51bGwpXG4gICAgaWYgKCFyZWZQYWludGVyLmN1cnJlbnQpIHtcbiAgICAgICAgcmVmUGFpbnRlci5jdXJyZW50ID0gbmV3IFBhaW50ZXJNYW5hZ2VyKClcbiAgICAgICAgcmVmUGFpbnRlci5jdXJyZW50Lm1vcnBob2xvZ3kgPSBtb3JwaG9sb2d5XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIG1vcnBob2xvZ3kgd2hlbiBpdCBjaGFuZ2VzIChldmVuIGlmIG9iamVjdCByZWZlcmVuY2UgY2hhbmdlcylcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAocmVmUGFpbnRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICByZWZQYWludGVyLmN1cnJlbnQubW9ycGhvbG9neSA9IG1vcnBob2xvZ3lcbiAgICAgICAgfVxuICAgIH0sIFttb3JwaG9sb2d5XSlcblxuICAgIC8vIENsZWFudXAgb25seSBvbiB1bm1vdW50XG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhaW50ZXJNYW5hZ2VyID0gcmVmUGFpbnRlci5jdXJyZW50XG4gICAgICAgICAgICBpZiAoIXBhaW50ZXJNYW5hZ2VyKSByZXR1cm5cblxuICAgICAgICAgICAgcGFpbnRlck1hbmFnZXIuZGVsZXRlKClcbiAgICAgICAgfVxuICAgIH0sIFtdKSAvLyBFbXB0eSBkZXBlbmRlbmN5IGFycmF5IC0gb25seSBydW4gb24gbW91bnQvdW5tb3VudFxuICAgIHJldHVybiByZWZQYWludGVyLmN1cnJlbnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhaW50ZXJDb250cm9sbGVyKFxuICAgIHBhaW50ZXI6IFBhaW50ZXJNYW5hZ2VyLFxuICAgIGRpc2FibGVFbGVjdHJvZGVzOiBib29sZWFuLFxuICAgIGRpc2FibGVTeW5hcHNlczogYm9vbGVhbixcbiAgICBkaXNhYmxlQ2xpY2s6IGJvb2xlYW4sXG4gICAgZXZlbnRTeW5hcHNlcz86IFRnZEV2ZW50PHsgY29sb3I6IHN0cmluZzsgZGF0YTogRmxvYXQzMkFycmF5IH1bXT5cbikge1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHBhaW50ZXIuZXZlbnRFcnJvci5kaXNwYXRjaChcbiAgICAgICAgICAgICAgICBcIllvdSBjYW5ub3QgYWRkIHJlY29yZGluZ3Mgbm9yIG1vdmUgaW5qZWN0aW9uIHdoaWxlIGEgc2ltdWxhdGlvbiBpcyBydW5uaW5nIVwiXG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcGFpbnRlci5ldmVudEZvcmJpZGRlbkNsaWNrLmFkZExpc3RlbmVyKGFjdGlvbilcbiAgICAgICAgcmV0dXJuICgpID0+IHBhaW50ZXIuZXZlbnRGb3JiaWRkZW5DbGljay5yZW1vdmVMaXN0ZW5lcihhY3Rpb24pXG4gICAgfSwgW3BhaW50ZXJdKVxuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHBhaW50ZXIpIHtcbiAgICAgICAgICAgIHBhaW50ZXIuY2xpY2thYmxlID0gZGlzYWJsZUNsaWNrICE9PSB0cnVlXG4gICAgICAgIH1cbiAgICB9LCBbZGlzYWJsZUNsaWNrLCBwYWludGVyXSlcblxuICAgIGNvbnN0IHN5bmFwc2VzID0gdXNlRXZlbnRWYWx1ZShldmVudFN5bmFwc2VzLCBbXSlcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBwYWludGVyLnNob3dTeW5hcHNlcyhzeW5hcHNlcylcbiAgICB9LCBbc3luYXBzZXMsIHBhaW50ZXJdKVxuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgcGFpbnRlci5kaXNhYmxlRWxlY3Ryb2RlcyA9IGRpc2FibGVFbGVjdHJvZGVzXG4gICAgfSwgW2Rpc2FibGVFbGVjdHJvZGVzLCBwYWludGVyXSlcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHBhaW50ZXIuZGlzYWJsZVN5bmFwc2VzID0gZGlzYWJsZVN5bmFwc2VzXG4gICAgfSwgW2Rpc2FibGVTeW5hcHNlcywgcGFpbnRlcl0pXG59XG5cbmZ1bmN0aW9uIHVzZUV2ZW50VmFsdWU8VD4oZXZlbnQ6IFRnZEV2ZW50PFQ+IHwgdW5kZWZpbmVkLCBpbml0aWFsVmFsdWU6IFQpOiBUIHtcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKGluaXRpYWxWYWx1ZSlcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWV2ZW50KSByZXR1cm5cblxuICAgICAgICBldmVudC5hZGRMaXN0ZW5lcihzZXRWYWx1ZSlcbiAgICAgICAgcmV0dXJuICgpID0+IGV2ZW50LnJlbW92ZUxpc3RlbmVyKHNldFZhbHVlKVxuICAgIH0sIFtldmVudF0pXG4gICAgcmV0dXJuIHZhbHVlXG59XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3R5bGUtbG9hZGVyQDMuMy40X3dlYnBhY2tANS4xMDUuMC9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3R5bGUtbG9hZGVyQDMuMy40X3dlYnBhY2tANS4xMDUuMC9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N0eWxlLWxvYWRlckAzLjMuNF93ZWJwYWNrQDUuMTA1LjAvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3R5bGUtbG9hZGVyQDMuMy40X3dlYnBhY2tANS4xMDUuMC9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3R5bGUtbG9hZGVyQDMuMy40X3dlYnBhY2tANS4xMDUuMC9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N0eWxlLWxvYWRlckAzLjMuNF93ZWJwYWNrQDUuMTA1LjAvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jc3MtbG9hZGVyQDYuMTEuMF93ZWJwYWNrQDUuMTA1LjAvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbNl0udXNlWzFdIS4vVmlld2VyLm1vZHVsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vY3NzLWxvYWRlckA2LjExLjBfd2VicGFja0A1LjEwNS4wL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzZdLnVzZVsxXSEuL1ZpZXdlci5tb2R1bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiaW1wb3J0IHsgVGdkRXZlbnQgfSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSBcIkAvc3RhdGVcIjtcbmltcG9ydCB7IHVzZUV2ZW50VmFsdWUgfSBmcm9tIFwiQC91dGlsL3V0aWxzXCI7XG5pbXBvcnQge1xuICAgIHR5cGUgUGFpbnRlck1hbmFnZXIsXG4gICAgdXNlUGFpbnRlck1hbmFnZXIsXG59IGZyb20gXCJAL3dlYmdsLW5ldXJvbi1zZWxlY3Rvci9wYWludGVyXCI7XG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL1ZpZXdlci5tb2R1bGUuY3NzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld2VyUHJvcHMge1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmlld2VyKHsgY2xhc3NOYW1lIH06IFZpZXdlclByb3BzKSB7XG4gICAgY29uc3QgbW9ycGhvbG9neSA9IFN0YXRlLm1vcnBob2xvZ3kudXNlVmFsdWUoKTtcbiAgICBjb25zdCBtYW5hZ2VyID0gdXNlUGFpbnRlck1hbmFnZXIobW9ycGhvbG9neSk7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gdXNlRXZlbnRWYWx1ZShcbiAgICAgICAge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBpdGVtOiBudWxsLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICB9LFxuICAgICAgICBtYW5hZ2VyLmV2ZW50SG92ZXIsXG4gICAgKTtcbiAgICBjb25zdCB7IGl0ZW0gfSA9IHNlbGVjdGlvbjtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtqb2luKGNsYXNzTmFtZSwgc3R5bGVzLnZpZXdlcil9PlxuICAgICAgICAgICAgPGFzaWRlPlxuICAgICAgICAgICAgICAgIDxoMT5Nb3JwaG9sb2d5PC9oMT5cbiAgICAgICAgICAgICAgICB7aXRlbSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZ3JpZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pk5hbWU6PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Yj57aXRlbS5uYW1lfTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+U2VjdGlvbjo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPntpdGVtLnNlY3Rpb25OYW1lfTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+U2VnbWVudDo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPntpdGVtLnNlZ21lbnRJbmRleH08L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkxlYXZlczo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPntpdGVtLmxlYXZlc0NvdW50fTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+TWF4IGxlbmd0aDo8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPntpdGVtLm1heExlbmd0aH08L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkNoaWxkcmVuOjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+e2l0ZW0uY2hpbGRyZW4ubGVuZ3RofTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+UmFkaXVzOjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+e2l0ZW0ucmFkaXVzfTwvYj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvYXNpZGU+XG4gICAgICAgICAgICA8Q2FudmFzIG1hbmFnZXI9e21hbmFnZXJ9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbmNvbnN0IENhbnZhcyA9IFJlYWN0Lm1lbW8oQ2FudmFzQ29udGVudCk7XG5cbmZ1bmN0aW9uIENhbnZhc0NvbnRlbnQoeyBtYW5hZ2VyIH06IHsgbWFuYWdlcjogUGFpbnRlck1hbmFnZXIgfSkge1xuICAgIGNvbnN0IG1vdW50Q2FudmFzID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsKSA9PiB7XG4gICAgICAgIG1hbmFnZXIuY2FudmFzID0gY2FudmFzO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgbWFuYWdlci5jYW52YXMgPSBudWxsO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gPGNhbnZhcyByZWY9e21vdW50Q2FudmFzfT48L2NhbnZhcz47XG59XG5cbmZ1bmN0aW9uIGpvaW4oLi4uY2xhc3NlczogdW5rbm93bltdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gY2xhc3Nlcy5maWx0ZXIoKGNscykgPT4gdHlwZW9mIGNscyA9PT0gXCJzdHJpbmdcIikuam9pbihcIiBcIik7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCJcblxuaW50ZXJmYWNlIEN1c3RvbUV2ZW50PFQ+IHtcbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lcjogKHY6IFQpID0+IHZvaWQpOiB2b2lkXG4gICAgcmVtb3ZlTGlzdGVuZXIobGlzdGVuZXI6ICh2OiBUKSA9PiB2b2lkKTogdm9pZFxufVxuXG5pbnRlcmZhY2UgQ3VzdG9tRXZlbnREaXNwYXRjaGFibGU8VD4gZXh0ZW5kcyBDdXN0b21FdmVudDxUPiB7XG4gICAgZGlzcGF0Y2goYXJnOiBUKTogdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRXZlbnRWYWx1ZTxUPihcbiAgICBpbml0aWFsVmFsdWU6IFQsXG4gICAgZXZlbnQ/OiBDdXN0b21FdmVudDxUPiB8IG51bGxcbik6IFQge1xuICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gUmVhY3QudXNlU3RhdGU8VD4oaW5pdGlhbFZhbHVlKVxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVyblxuXG4gICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKHNldFZhbHVlKVxuICAgICAgICByZXR1cm4gKCkgPT4gZXZlbnQucmVtb3ZlTGlzdGVuZXIoc2V0VmFsdWUpXG4gICAgfSwgW2V2ZW50XSlcbiAgICByZXR1cm4gdmFsdWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUV2ZW50U3RhdGU8VD4oXG4gICAgaW5pdGlhbFZhbHVlOiBULFxuICAgIGV2ZW50PzogQ3VzdG9tRXZlbnREaXNwYXRjaGFibGU8VD4gfCBudWxsXG4pOiBbVCwgKHZhbHVlOiBUKSA9PiB2b2lkXSB7XG4gICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZTxUPihpbml0aWFsVmFsdWUpXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFldmVudCkgcmV0dXJuXG5cbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIoc2V0VmFsdWUpXG4gICAgICAgIHJldHVybiAoKSA9PiBldmVudC5yZW1vdmVMaXN0ZW5lcihzZXRWYWx1ZSlcbiAgICB9LCBbZXZlbnRdKVxuICAgIHJldHVybiBbXG4gICAgICAgIHZhbHVlLFxuICAgICAgICAoYXJnOiBUKSA9PiB7XG4gICAgICAgICAgICBldmVudD8uZGlzcGF0Y2goYXJnKVxuICAgICAgICB9LFxuICAgIF1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsYXNzTmFtZXMoLi4uYXJnczogdW5rbm93bltdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYXJnc1xuICAgICAgICAuZmlsdGVyKChhcmcpID0+IHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgJiYgYXJnLnRyaW0oKS5sZW5ndGggPiAwKVxuICAgICAgICAuam9pbihcIiBcIilcbn1cbiIsImltcG9ydCBWaWV3ZXIgZnJvbSBcIkAvY29tcG9uZW50cy9WaWV3ZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcbiAgICByZXR1cm4gPFZpZXdlciAvPjtcbn1cbiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsImxvY2FscyIsImNvbXB1dGVEaXN0YW5jZSIsImNhbWVyYSIsImJib3giLCJzY2FsZSIsIndpZHRoIiwiTWF0aCIsIm1heCIsImFicyIsImNlbnRlciIsIm1pbiIsImhlaWdodCIsImZpdFNwYWNlQXRUYXJnZXQiLCJ0cmFuc2ZvIiwiZGlzdGFuY2UiLCJjb21wdXRlU2VjdGlvbk9mZnNldCIsInN0cnVjdHVyZSIsIml0ZW0iLCJ4U2NyZWVuIiwieVNjcmVlbiIsIm9mZnNldFNlZ21lbnQiLCJzdGFydCIsImVuZCIsIm1hdHJpeCIsIm1hdHJpeFByb2plY3Rpb24iLCJtdWx0aXBseSIsIm1hdHJpeE1vZGVsVmlldyIsImFwcGx5TWF0cml4IiwidyIsInZlY1UiLCJ4IiwieSIsImxlbmd0aCIsInNpemUiLCJub3JtYWxpemUiLCJ2ZWNWIiwiZG90IiwiY29tcHV0ZVNlZ21lbnRPZmZzZXQiLCJzZWdtZW50cyIsImdldFNlZ21lbnRzT2ZTZWN0aW9uIiwic2VjdGlvbk5hbWUiLCJ0b3RhbERpc3RhbmNlIiwic2VnbWVudCIsInNlZ21lbnRJbmRleCIsIk1hdGVyaWFsSW5kZXgiLCJjb25zdHJ1Y3RvciIsInN1cGVyIiwidmFyeWluZ3MiLCJ2YXJDb2xvciIsImV4dHJhVmVydGV4U2hhZGVyRnVuY3Rpb25zIiwidmVydGV4U2hhZGVyQ29kZSIsImZyYWdtZW50U2hhZGVyQ29kZSIsIk9mZnNjcmVlblBhaW50ZXIiLCJvbnNjcmVlbkNvbnRleHQiLCJvZmZzY3JlZW5DYW52YXMiLCJPZmZzY3JlZW5DYW52YXMiLCJfZGF0YSIsImdyb3VwIiwicGFpbnQiLCJvZmZzY3JlZW5Db250ZXh0IiwidGhpcyIsImNhbnZhcyIsImNlaWwiLCJoIiwiZXZlbnRQYWludCIsImFkZExpc3RlbmVyIiwiY29udGV4dCIsInByZXNlcnZlRHJhd2luZ0J1ZmZlciIsImFudGlhbGlhcyIsImFscGhhIiwiYWRkIiwiZGF0YSIsImRlbGV0ZSIsImRhdGFzZXRzUGFpcnMiLCJkYXRhc2V0M0QiLCJkYXRhc2V0RGVuZHJvZ3JhbSIsInBhaW50ZXIiLCJyb3VuZG5lc3MiLCJtaW5SYWRpdXMiLCJtYXRlcmlhbCIsImNvbG9yIiwiZGVwdGgiLCJsZXNzT3JFcXVhbCIsImNoaWxkcmVuIiwiZ2V0SXRlbUF0IiwiYnl0ZXMiLCJVaW50OEFycmF5IiwiZ2wiLCJyZWFkUGl4ZWxzIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJSIiwiRyIsIkIiLCJyZWFkUGl4ZWwiLCJ2YWx1ZSIsImluZGV4IiwiZmxvb3IiLCJnZXQiLCJyZW1vdmVMaXN0ZW5lciIsImJ1aWxUcmVlIiwiaXRlbXMiLCJtYXAiLCJNYXAiLCJzZXQiLCJrZXkzRCIsInBhcmVudCIsInJvb3QiLCJvcnBoYW5zIiwiZmlsdGVyIiwicG9wdWxhdGVUcmVlIiwiY29tcHV0ZVJhbmtzIiwiYWRkTGlhaXNvbnMiLCJ6IiwidG9GaXhlZCIsImRpc3RhbmNlRnJvbVNvbWEiLCJuZXdEaXN0YW5jZSIsImxlYXZlc0NvdW50IiwibWF4TGVuZ3RoIiwiY2hpbGQiLCJyYW5rTWluIiwicmFua01heCIsInJhbmsiLCJyYW5rU2l6ZSIsInJhbmtDaGlsZFNpemUiLCJsaWFpc29uIiwibmFtZSIsInR5cGUiLCJTdHJ1Y3R1cmVJdGVtVHlwZSIsIkxpYWlzb24iLCJyYWRpdXMiLCJTdHJ1Y3R1cmUiLCJtb3JwaG9sb2d5Iiwic2VnbWVudHNQZXJTZWN0aW9uIiwiY3JlYXRlSW5pdGlhbEJCb3giLCJiYm94U29tYSIsImJib3hEZW5kcml0ZXMiLCJpc0JCb3hTb21hRW1wdHkiLCJpc0JCb3hEZW5kcml0ZXNFbXB0eSIsInNvbWFDb3VudHMiLCJzb21hQ2VudGVyIiwic2VjdGlvbk5hbWVzIiwiT2JqZWN0Iiwia2V5cyIsImhhc0FwaWNhbERlbmRyaXRlcyIsImlzU29tYSIsInRvTG93ZXJDYXNlIiwic3RhcnRzV2l0aCIsInNlY3Rpb24iLCJuc2VnIiwieHN0YXJ0IiwieXN0YXJ0IiwienN0YXJ0IiwieGVuZCIsInllbmQiLCJ6ZW5kIiwicmVzb2x2ZVR5cGUiLCJkaWFtIiwic2VjdGlvbkluZGV4IiwicmVzb2x2ZVNlY3Rpb25JbmRleCIsInNlZ21lbnRzQ291bnQiLCJhZGRUb1NlY3Rpb24iLCJjb21wdXRlTWluIiwiY29tcHV0ZU1heCIsImluY2x1ZGVzIiwiY29weUJCb3hJbnRvIiwiRXJyb3IiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJzZWN0aW9uRnJvbU1hcCIsInNvcnQiLCJhIiwiYiIsInByZXYiLCJjdXJyIiwic2xpY2UiLCJpIiwiaW5kZXhPZiIsInN1ZmZpeCIsInBhcnNlSW50IiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJORUdBVElWRV9JTkZJTklUWSIsImZyb20iLCJ0byIsIlBBTEVUVEUiLCJBeG9uIiwiRGVuZHJpdGUiLCJCYXNhbERlbmRyaXRlIiwiQXBpY2FsRGVuZHJpdGUiLCJNeWVsaW4iLCJTb21hIiwiU2VsZWN0ZWQiLCJVbmtub3duIiwiUGFpbnRlckhvdmVyIiwiYmxlbmQiLCJjdWxsIiwiYmFjayIsImFsd2F5cyIsImRhdGFzZXQiLCJtYWtlRGF0YXNldCIsInNwZWN1bGFyRXhwb25lbnQiLCJzcGVjdWxhckludGVuc2l0eSIsImxvY2tMaWdodHNUb0NhbWVyYSIsImxpZ2h0IiwiZGlyZWN0aW9uIiwiUGFpbnRlclN5bmFwc2VzIiwic3luYXBzZXMiLCJkYXRhUG9pbnQiLCJjbG91ZCIsIm1pblNpemVJblBpeGVscyIsInJhZGl1c011bHRpcGxpZXIiLCJ0ZXh0dXJlIiwibG9hZEJpdG1hcCIsIm11c3REZWxldGVUZXh0dXJlIiwiUGFpbnRlciIsImdyb3VwU2VnbWVudHMiLCJncm91cFN5bmFwc2VzIiwiZ3JvdXBIb3ZlciIsIl9wYWludGVyU2VnbWVudHMiLCJfbWl4IiwiX3N5bmFwc2VzIiwicGFsZXR0ZSIsInNldFBhcmFtcyIsIm1hZ0ZpbHRlciIsIm1pbkZpbHRlciIsImxlc3MiLCJwYWludGVyU2VnbWVudHMiLCJtaXgiLCJzeW5hcHNlc0VuYWJsZWQiLCJhY3RpdmUiLCJoaWdobGlnaHQiLCJUcmFuc2l0aW9uTWFuYWdlciIsIm9mZnNjcmVlbiIsIl9jb250ZXh0IiwiX21vZGUiLCJhY3R1YWxQYWludCIsInRpbWUiLCJkZWx0YSIsIkRVUkFUSU9OIiwiUEFVU0UiLCJzcGFuIiwiYW5nbGUiLCJQSSIsImNvcyIsImxvZ2ljIiwicmVtb3ZlQWxsIiwicGxheSIsIm1vZGUiLCJuZXdNb2RlIiwicHJvY2Vzc1NlZ21lbnQiLCJ1diIsInNpbmdsZXRvbiIsImNvbXB1dGVEZW5kcm9ncmFtU3RhcnQiLCJjb21wdXRlRGVuZHJvZ3JhbUVuZCIsIk1vcnBob2xvZ3lEYXRhIiwic2VnbWVudHMzRCIsInNlZ21lbnRzRGVuZHJvZ3JhbSIsIm1ha2VTZWdtZW50czNEIiwibWFrZVNlZ21lbnRzRGVuZHJvZ3JhbSIsIkluaXRpYWxpemVyIiwiX2NhbnZhcyIsIl9tb3JwaG9sb2d5IiwiaW5pdGlhbGl6ZVdoZW5SZWFkeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbml0aWFsaXplIiwiRU1QVFlfU0VHTUVOVFMiLCJkaXNhYmxlRWxlY3Ryb2RlcyIsImV2ZW50RXJyb3IiLCJldmVudEhvdmVyIiwiZXZlbnRUYXAiLCJldmVudFpvb20iLCJldmVudFJlc3RpbmdQb3NpdGlvbiIsImV2ZW50SGludFZpc2libGUiLCJldmVudEZvcmJpZGRlbkNsaWNrIiwidmlldyIsIl9kaXNhYmxlU3luYXBzZXMiLCJfaG92ZXJJdGVtIiwib2Zmc2V0IiwiaW5pdGlhbFBvc2l0aW9uIiwiY2FtZXJhQ29udHJvbGxlciIsImxhc3RDYW1lcmFDaGFuZ2VUaW1lc3RhbXAiLCJsYXN0Q2FtZXJhU3RhdGUiLCJfY2xpY2thYmxlIiwiem9vbU91dCIsInpvb20iLCJ6b29tSW4iLCJyZXNldENhbWVyYSIsInJlc2V0Iiwib25BY3Rpb24iLCJ0IiwiZGlzcGF0Y2giLCJvbkVuZCIsImhhbmRsZVBhaW50IiwiZ2V0Q3VycmVudFN0YXRlIiwiZGlzYWJsZVN5bmFwc2VzIiwiY2xpY2thYmxlIiwiaG92ZXJJdGVtIiwidG9Ob3JtYWxpemVkWm9vbSIsInRvQ29udHJvbGxlclpvb20iLCJnZXRDYW1lcmFNYXRyaXgiLCJnZXRTZWN0aW9uQ29vcmRpbmF0ZXMiLCJyZWR1Y2UiLCJkaXN0IiwidGFyZ2V0RGlzdGFuY2UiLCJwcmV2aW91c0Rpc3RhbmNlIiwic2VnbWVudE9mZnNldCIsIm5ld0Zyb21NaXgiLCJnZXRTZWdtZW50Iiwic2VjdGlvbk9mZnNldCIsInNob3dTeW5hcHNlcyIsImluaXRDb250ZXh0IiwiaW5pdFBhaW50ZXIiLCJpbml0T2Zmc2NyZWVuIiwiZXZlbnRXZWJHTENvbnRleHRSZXN0b3JlZCIsImdsb2JhbFRoaXMiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ6b29tTWluIiwiem9vbU1heCIsInBvc2l0aW9uIiwibmVhciIsInNjcmVlbkhlaWdodCIsInNjcmVlbldpZHRoIiwiZGlzdGFuY2VNYXgiLCJsaW1pdCIsImRpc3RhbmNlTWluIiwiZW5zdXJlU21hbGxlciIsIm1ha2VDYW1lcmEiLCJpbml0Q2FtZXJhQ29udHJvbGxlciIsInNldEN1cnJlbnRTdGF0ZSIsImlucHV0cyIsInBvaW50ZXIiLCJldnQiLCJjdXJyZW50IiwiRGF0ZSIsIm5vdyIsIm1pblpvb20iLCJtYXhab29tIiwiZGV0YWNoIiwiaW5lcnRpYU9yYml0IiwiaW5lcnRpYVpvb20iLCJzcGVlZFpvb20iLCJvblpvb21SZXF1ZXN0IiwiZXZlbnRDaGFuZ2UiLCJjb250cm9sbGVyWm9vbSIsIm5vcm1hbGl6ZWRab29tIiwiUGFpbnRlck1hbmFnZXIiLCJvcHRpb25zIiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJzZXRBdHRyaWJ1dGVzIiwiaW5zZXJ0IiwiZG9tQVBJIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwidW5kZWZpbmVkIiwiVmlld2VyIiwiY2xhc3NOYW1lIiwibWFuYWdlciIsInJlZlBhaW50ZXIiLCJwYWludGVyTWFuYWdlciIsInVzZVBhaW50ZXJNYW5hZ2VyIiwidXNlVmFsdWUiLCJzZWxlY3Rpb24iLCJpbml0aWFsVmFsdWUiLCJldmVudCIsInNldFZhbHVlIiwidXNlRXZlbnRWYWx1ZSIsImpvaW4iLCJ2aWV3ZXIiLCJncmlkIiwiQ2FudmFzIiwicmVmIiwiY2xhc3NlcyIsImNscyIsIlBhZ2UiXSwic291cmNlUm9vdCI6IiJ9